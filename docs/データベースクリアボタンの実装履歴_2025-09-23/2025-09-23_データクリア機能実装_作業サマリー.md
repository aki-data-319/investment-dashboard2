# 2025-09-23 ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢æ©Ÿèƒ½å®Ÿè£… ä½œæ¥­ã‚µãƒãƒªãƒ¼

**ä½œæ¥­æ—¥**: 2025-09-23  
**ä½œæ¥­å†…å®¹**: control-actionså†…ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã®å®Ÿè£…  
**çµæœ**: å®Ÿè£…å®Œäº†ã€ãŸã ã—å‹•ä½œç¢ºèªã§å•é¡Œç™ºç”Ÿ  

## ä½œæ¥­æ¦‚è¦

TransactionTable.jsã®`control-actions`ã‚¨ãƒªã‚¢å†…ã«ã€CSVå‡ºåŠ›ãƒ»æ›´æ–°ãƒœã‚¿ãƒ³ã¨åŒåˆ—ã§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚
3æ®µéšç¢ºèªãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã‚‹å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿å‰Šé™¤æ©Ÿèƒ½ã‚’è¿½åŠ ã—ãŸãŒã€å®Ÿéš›ã®å‰Šé™¤å‡¦ç†ãŒå‹•ä½œã—ãªã„å•é¡ŒãŒç™ºç”Ÿã€‚

## å®Ÿè£…ã—ãŸæ©Ÿèƒ½

### 1. ãƒœã‚¿ãƒ³é…ç½®
- **å ´æ‰€**: `class="control-actions"`å†…
- **è¡¨ç¤ºé †**: CSVå‡ºåŠ› â†’ æ›´æ–° â†’ **ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢**ï¼ˆæœ€å³ç«¯ï¼‰
- **ãƒ‡ã‚¶ã‚¤ãƒ³**: å±é™ºæ€§ã‚’ç¤ºã™èµ¤ç³»ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### 2. ç¢ºèªãƒ—ãƒ­ã‚»ã‚¹ï¼ˆæœ€çµ‚ç‰ˆï¼‰
1. **ç¬¬1æ®µéš**: åŸºæœ¬è­¦å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°
2. **ç¬¬2æ®µéš**: ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
3. **æœ€çµ‚ç¢ºèª**: ç°¡å˜ãªç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆDELETEå…¥åŠ›ã¯å‰Šé™¤æ¸ˆã¿ï¼‰

### 3. å‰Šé™¤å‡¦ç†
- DataStoreManager.clearAllData()ã‚’ç›´æ¥å‘¼ã³å‡ºã—
- å‰Šé™¤å®Œäº†å¾Œã€2ç§’ã§ãƒšãƒ¼ã‚¸ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã¨é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
   â†“
2. TransactionTable.clearAllDatabase() å®Ÿè¡Œ
   â†“
3. 3æ®µéšç¢ºèªãƒ—ãƒ­ã‚»ã‚¹
   â†“
4. window.dataStoreManager.clearAllData() å‘¼ã³å‡ºã—
   â†“
5. LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
   â†“
6. ãƒšãƒ¼ã‚¸ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
```

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆå®Ÿè£…é †ï¼‰

#### Phase 1: HTMLæ§‹é€ ãƒ»ãƒœã‚¿ãƒ³è¿½åŠ 
1. **`/src/ui/components/TransactionTable.js`** 
   - `renderControls()` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ40-66è¡Œç›®ï¼‰
   - ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³è¿½åŠ 

#### Phase 2: JavaScriptæ©Ÿèƒ½å®Ÿè£…
2. **`/src/ui/components/TransactionTable.js`**
   - `clearAllDatabase()` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ502-554è¡Œç›®ï¼‰
   - `getDatabaseStats()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ565-586è¡Œç›®ï¼‰

#### Phase 3: CSSãƒ»ã‚¹ã‚¿ã‚¤ãƒ«å®Ÿè£…
3. **`/src/ui/styles/DatabaseView.css`**
   - `.database-controls` ä¸Šå´ãƒãƒ¼ã‚¸ãƒ³è¿½åŠ ï¼ˆ573è¡Œç›®ï¼‰
   - `.btn-clear-db` ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©ï¼ˆ632-656è¡Œç›®ï¼‰
   - `.control-actions` ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ï¼ˆ598-602è¡Œç›®ï¼‰

#### Phase 4: ä¾å­˜é–¢ä¿‚ãƒ»åˆæœŸåŒ–ä¿®æ­£
4. **`/public/index.html`**
   - DataStoreManager.jsã®èª­ã¿è¾¼ã¿è¿½åŠ ï¼ˆ73è¡Œç›®ï¼‰

5. **`/public/js/app.js`**
   - DataStoreManagerã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆï¼ˆ27-34è¡Œç›®ï¼‰

#### åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ—¢å­˜ï¼‰
6. **`/src/data/managers/DataStoreManager.js`**
   - `clearAllData()` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ1408-1433è¡Œç›®ï¼‰
   - å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å‡¦ç†

## å®Ÿè£…è©³ç´°

### TransactionTable.js ã®å®Ÿè£…

#### 1. ãƒœã‚¿ãƒ³HTMLï¼ˆ59-61è¡Œç›®ï¼‰
```html
<button onclick="transactionTable.clearAllDatabase()" class="btn-clear-db">
    ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
</button>
```

#### 2. clearAllDatabase()ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆ502-554è¡Œç›®ï¼‰
```javascript
clearAllDatabase() {
    console.log('ğŸ—‘ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªã‚¢é–‹å§‹');
    
    // DataStoreManagerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å–å¾—
    const dataManager = window.dataStoreManager;
    
    if (!dataManager) {
        console.error('âŒ DataStoreManagerãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
        this.showMessage('âŒ ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
        return;
    }
    
    // 3æ®µéšç¢ºèªãƒ—ãƒ­ã‚»ã‚¹
    // ... ç¢ºèªå‡¦ç† ...
    
    // ãƒ‡ãƒ¼ã‚¿å‰Šé™¤å®Ÿè¡Œ
    const success = dataManager.clearAllData();
    
    // å®Œäº†å‡¦ç†ãƒ»ãƒšãƒ¼ã‚¸ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
}
```

#### 3. getDatabaseStats()ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆ565-586è¡Œç›®ï¼‰
```javascript
getDatabaseStats(dataManager) {
    try {
        const mutualFunds = dataManager.getMutualFunds();
        const stocks = dataManager.getStocks();
        const cryptos = dataManager.getCryptoAssets();
        
        return {
            mutualFunds: mutualFunds.length,
            stocks: stocks.length,
            cryptos: cryptos.length,
            total: mutualFunds.length + stocks.length + cryptos.length
        };
    } catch (error) {
        console.error('çµ±è¨ˆæƒ…å ±å–å¾—ã‚¨ãƒ©ãƒ¼:', error);
        return { mutualFunds: 0, stocks: 0, cryptos: 0, total: 0 };
    }
}
```

### CSSå®Ÿè£…

#### 1. database-controlsä¸Šå´ãƒãƒ¼ã‚¸ãƒ³ï¼ˆ573è¡Œç›®ï¼‰
```css
.database-controls {
    margin-top: 1.5rem;    /* è¿½åŠ  */
    margin-bottom: 1.5rem;
}
```

#### 2. ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆ632-656è¡Œç›®ï¼‰
```css
.btn-clear-db {
    background: linear-gradient(135deg, #dc3545, #c82333);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.btn-clear-db:hover {
    background: linear-gradient(135deg, #c82333, #bd2130);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(220, 53, 69, 0.3);
}
```

### ä¾å­˜é–¢ä¿‚ãƒ»åˆæœŸåŒ–

#### 1. index.html - ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ï¼ˆ73è¡Œç›®ï¼‰
```html
<script src="../src/data/managers/DataStoreManager.js"></script>
```

#### 2. app.js - ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆï¼ˆ27-34è¡Œç›®ï¼‰
```javascript
// DataStoreManagerã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
console.log('ğŸ—„ï¸ Initializing DataStoreManager...');
if (typeof DataStoreManager !== 'undefined') {
    window.dataStoreManager = new DataStoreManager();
    console.log('âœ… DataStoreManager initialized globally');
} else {
    console.warn('âš ï¸ DataStoreManager not found');
}
```

## å•é¡Œç™ºç”ŸçŠ¶æ³

### ç¾åœ¨ã®çŠ¶æ³
- âœ… ãƒœã‚¿ãƒ³è¡¨ç¤º: æ­£å¸¸
- âœ… ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°: æ­£å¸¸å‹•ä½œ
- âŒ **ãƒ‡ãƒ¼ã‚¿å‰Šé™¤**: å®Ÿè¡Œã•ã‚Œãªã„

### æƒ³å®šã•ã‚Œã‚‹å•é¡Œç®‡æ‰€

#### 1. DataStoreManagerèª­ã¿è¾¼ã¿å•é¡Œ
- `window.dataStoreManager`ãŒæ­£ã—ãåˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„å¯èƒ½æ€§
- ES6 module vs ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ç«¶åˆ

#### 2. clearAllData()ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œå•é¡Œ
- ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã¯æˆåŠŸã™ã‚‹ãŒã€å®Ÿéš›ã®å‰Šé™¤ãŒå‹•ä½œã—ãªã„
- LocalStorageã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®å•é¡Œ

#### 3. ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ
- TransactionTableèª­ã¿è¾¼ã¿æ™‚ã«DataStoreManagerãŒæœªåˆæœŸåŒ–

## æ¬¡å›ä½œæ¥­ã®æ‰‹é †

### 1. åŸºç›¤ç¢ºèª
```bash
# ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª
console.log(typeof DataStoreManager);
console.log(window.dataStoreManager);
console.log(window.dataStoreManager?.clearAllData);
```

### 2. ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿é †åºç¢ºèª
1. `/public/index.html` - ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿é †åº
2. `/public/js/app.js` - åˆæœŸåŒ–å‡¦ç†
3. `/src/data/managers/DataStoreManager.js` - ã‚¯ãƒ©ã‚¹å®šç¾©

### 3. å®Ÿè¡Œæ™‚ãƒ‡ãƒãƒƒã‚°
1. TransactionTable.clearAllDatabase()ã®å„ã‚¹ãƒ†ãƒƒãƒ—
2. DataStoreManager.clearAllData()ã®å®Ÿè¡Œçµæœ
3. LocalStorageã®å®Ÿéš›ã®çŠ¶æ…‹

### 4. ä»£æ›¿å®Ÿè£…æ¤œè¨
- ç›´æ¥LocalStorageæ“ä½œ
- ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã®å‰Šé™¤å‡¦ç†å‚è€ƒ

## å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ï¼ˆå‚è€ƒï¼‰

### ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³å‰Šé™¤
```javascript
// å‰Šé™¤å‰ï¼ˆæ··ä¹±ã‚’é¿ã‘ã‚‹ãŸã‚å‰Šé™¤ï¼‰
<button onclick="transactionTable.clearFilters()" class="btn-secondary">
    ğŸ”„ ã‚¯ãƒªã‚¢
</button>
```

### ç¬¬3æ®µéšãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›å‰Šé™¤
```javascript
// å‰Šé™¤å‰ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šã®ãŸã‚å‰Šé™¤ï¼‰
const confirmText = prompt(`å‰Šé™¤ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ŒDELETEã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„:`);
if (confirmText !== 'DELETE') {
    return;
}
```

## ä½œæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **`/docs/control-actionså†…ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒªã‚¢æ©Ÿèƒ½_å®Ÿè£…è¨ˆç”»æ›¸.md`**
   - è©³ç´°ãªå®Ÿè£…è¨ˆç”»ã¨ã‚³ãƒ¼ãƒ‰ä¾‹

2. **`/docs/2025-09-23_ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢æ©Ÿèƒ½å®Ÿè£…_ä½œæ¥­ã‚µãƒãƒªãƒ¼.md`** (ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«)
   - ä½œæ¥­å†…å®¹ã¨å•é¡Œã®æ•´ç†

## çµè«–

ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢æ©Ÿèƒ½ã®å®Ÿè£…ã¯å®Œäº†ã—ãŸãŒã€å®Ÿéš›ã®å‰Šé™¤å‡¦ç†ãŒå‹•ä½œã—ãªã„å•é¡ŒãŒæ®‹ã£ã¦ã„ã‚‹ã€‚
æ¬¡å›ã¯ä¾å­˜é–¢ä¿‚ã¨DataStoreManageråˆæœŸåŒ–ãƒ—ãƒ­ã‚»ã‚¹ã‚’1ã¤ãšã¤ç¢ºèªã—ã€æ ¹æœ¬åŸå› ã‚’ç‰¹å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ç‰¹ã«ã€window.dataStoreManagerã®åˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨TransactionTableã§ã®å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®æ•´åˆæ€§ã‚’é‡ç‚¹çš„ã«èª¿æŸ»ã™ã‚‹ã€‚