# ユーザーガイダンス機能 実装計画書

**作成日**: 2025-09-23  
**対象バージョン**: Investment Dashboard v2  
**作成者**: Claude Code  

## 概要

ユーザーガイダンス機能の実装において、どのファイルをどのように修正すべきかを具体的に指示します。現在のCSV取り込み機能に、楽天証券CSVダウンロード手順説明、エラー対処ガイド、FAQ機能を追加する詳細な実装手順を示します。

## 1. 実装アーキテクチャ

### 1.1 追加するファイル構成
```
src/
├── ui/
│   ├── components/
│   │   ├── HelpModal.js              【新規】ヘルプモーダル
│   │   ├── StepGuide.js              【新規】ステップガイド
│   │   ├── TroubleshootingPanel.js   【新規】トラブルシューティング
│   │   └── FaqAccordion.js           【新規】FAQ表示
│   ├── views/
│   │   ├── CsvImportView.js          【修正】ヘルプ機能追加
│   │   └── HelpView.js               【新規】専用ヘルプページ
│   └── controllers/
│       ├── CsvImportController.js    【修正】ヘルプ連携追加
│       └── HelpController.js         【新規】ヘルプ機能制御
├── data/
│   └── help/
│       ├── csvDownloadGuide.js       【新規】ダウンロード手順データ
│       ├── troubleshooting.js        【新規】エラー対処データ
│       └── faqData.js                【新規】FAQデータ
└── assets/
    └── images/
        └── help/                     【新規】ガイド用画像フォルダ
            ├── rakuten-login.png
            ├── rakuten-download-jp.png
            ├── rakuten-download-us.png
            └── rakuten-download-fund.png
```

### 1.2 修正するファイル
- `src/ui/views/CsvImportView.js` - ヘルプボタンとモーダル追加
- `src/ui/controllers/CsvImportController.js` - ヘルプ機能連携
- `src/ui/Router.js` - ヘルプページルート追加
- `public/index.html` - ヘルプ用スタイル追加

## 2. 具体的な実装手順

### Phase 1: データ構造とヘルプコンテンツの作成

#### Step 1.1: CSVダウンロードガイドデータ作成

**ファイル**: `src/data/help/csvDownloadGuide.js`

```javascript
/**
 * 楽天証券CSVダウンロード手順ガイド
 * @description 各CSV種類別のダウンロード手順を定義
 */
export const csvDownloadGuide = {
  JP: {
    title: '日本株式取引履歴CSVのダウンロード',
    description: '楽天証券で日本株の取引履歴をCSVファイルとしてダウンロードする手順',
    steps: [
      {
        step: 1,
        title: '楽天証券にログイン',
        description: '楽天証券の会員ページにログインします',
        image: '/assets/images/help/rakuten-login.png',
        note: 'ユーザーID・パスワードでログインしてください'
      },
      {
        step: 2,
        title: '取引履歴画面に移動',
        description: 'メニューから「取引履歴」→「国内株式」を選択',
        image: '/assets/images/help/rakuten-menu-jp.png',
        note: 'モバイル版とPC版で画面が異なる場合があります'
      },
      {
        step: 3,
        title: '期間を指定',
        description: 'ダウンロードしたい取引の期間を指定します',
        image: '/assets/images/help/rakuten-period-jp.png',
        note: '一度に取得できる期間には制限があります（通常1年間）'
      },
      {
        step: 4,
        title: 'CSVダウンロード実行',
        description: '「CSVダウンロード」ボタンをクリック',
        image: '/assets/images/help/rakuten-download-jp.png',
        note: 'ダウンロードが開始されない場合はポップアップブロックを確認'
      },
      {
        step: 5,
        title: 'ファイル保存',
        description: 'ダウンロードしたCSVファイルを適切な場所に保存',
        image: '/assets/images/help/save-file.png',
        note: 'ファイル名は「tradehistoryJP_YYYYMMDD.csv」のような形式'
      }
    ],
    tips: [
      '取引履歴が多い場合は、期間を分けて複数回ダウンロードしてください',
      'ファイル名を変更せずに保存することをお勧めします',
      'ダウンロード後はファイルが正常に開けるか確認してください'
    ]
  },
  US: {
    title: '米国株式取引履歴CSVのダウンロード',
    description: '楽天証券で米国株の取引履歴をCSVファイルとしてダウンロードする手順',
    steps: [
      {
        step: 1,
        title: '楽天証券にログイン',
        description: '楽天証券の会員ページにログインします',
        image: '/assets/images/help/rakuten-login.png',
        note: 'ユーザーID・パスワードでログインしてください'
      },
      {
        step: 2,
        title: '外国株式取引履歴画面に移動',
        description: 'メニューから「取引履歴」→「外国株式」を選択',
        image: '/assets/images/help/rakuten-menu-us.png',
        note: '外国株式の取引がない場合は表示されません'
      },
      {
        step: 3,
        title: '期間を指定',
        description: 'ダウンロードしたい取引の期間を指定します',
        image: '/assets/images/help/rakuten-period-us.png',
        note: '米国株は為替レート情報も含まれます'
      },
      {
        step: 4,
        title: 'CSVダウンロード実行',
        description: '「CSVダウンロード」ボタンをクリック',
        image: '/assets/images/help/rakuten-download-us.png',
        note: 'USドル建ての金額と円建ての金額が両方記録されます'
      },
      {
        step: 5,
        title: 'ファイル保存',
        description: 'ダウンロードしたCSVファイルを適切な場所に保存',
        image: '/assets/images/help/save-file.png',
        note: 'ファイル名は「tradehistoryUS_YYYYMMDD.csv」のような形式'
      }
    ],
    tips: [
      '米国株のCSVには為替レート情報が含まれています',
      '時差により約定日と受渡日に注意してください',
      '税金情報も自動的に含まれます'
    ]
  },
  INVST: {
    title: '投資信託取引履歴CSVのダウンロード',
    description: '楽天証券で投資信託の取引履歴をCSVファイルとしてダウンロードする手順',
    steps: [
      {
        step: 1,
        title: '楽天証券にログイン',
        description: '楽天証券の会員ページにログインします',
        image: '/assets/images/help/rakuten-login.png',
        note: 'ユーザーID・パスワードでログインしてください'
      },
      {
        step: 2,
        title: '投資信託取引履歴画面に移動',
        description: 'メニューから「取引履歴」→「投資信託」を選択',
        image: '/assets/images/help/rakuten-menu-fund.png',
        note: '投資信託の取引がない場合は表示されません'
      },
      {
        step: 3,
        title: '期間を指定',
        description: 'ダウンロードしたい取引の期間を指定します',
        image: '/assets/images/help/rakuten-period-fund.png',
        note: '分配金の再投資も取引として記録されます'
      },
      {
        step: 4,
        title: 'CSVダウンロード実行',
        description: '「CSVダウンロード」ボタンをクリック',
        image: '/assets/images/help/rakuten-download-fund.png',
        note: '買付手数料やポイント利用情報も含まれます'
      },
      {
        step: 5,
        title: 'ファイル保存',
        description: 'ダウンロードしたCSVファイルを適切な場所に保存',
        image: '/assets/images/help/save-file.png',
        note: 'ファイル名は「tradehistoryINVST_YYYYMMDD.csv」のような形式'
      }
    ],
    tips: [
      '投資信託は口数での管理となります',
      '分配金の再投資も取引として記録されます',
      'ポイント利用分も金額に含まれています'
    ]
  }
};

export default csvDownloadGuide;
```

#### Step 1.2: トラブルシューティングデータ作成

**ファイル**: `src/data/help/troubleshooting.js`

```javascript
/**
 * トラブルシューティングデータ
 * @description エラー別の対処方法を定義
 */
export const troubleshootingData = {
  fileErrors: {
    title: 'ファイル関連のエラー',
    description: 'CSVファイル自体に関する問題の解決方法',
    items: [
      {
        id: 'invalid-csv',
        error: 'CSVファイルではありません',
        symptoms: [
          'ファイル選択時にエラーメッセージが表示される',
          'プレビューが表示されない'
        ],
        causes: [
          'Excel形式(.xlsx)のファイルを選択している',
          'テキストファイル(.txt)を選択している',
          'PDFファイルを誤って選択している'
        ],
        solutions: [
          {
            step: 1,
            action: 'ファイル形式を確認',
            description: '選択したファイルの拡張子が「.csv」になっているか確認してください',
            image: '/assets/images/help/check-file-extension.png'
          },
          {
            step: 2,
            action: '楽天証券からCSVを再ダウンロード',
            description: '楽天証券のサイトから正しい形式でダウンロードしてください',
            image: '/assets/images/help/redownload-csv.png'
          },
          {
            step: 3,
            action: 'ファイルの内容を確認',
            description: 'メモ帳やExcelでファイルを開いて、CSV形式になっているか確認してください',
            image: '/assets/images/help/check-csv-content.png'
          }
        ]
      },
      {
        id: 'encoding-error',
        error: '文字化けしています',
        symptoms: [
          'プレビューで文字が正しく表示されない',
          '銘柄名が「・・・」や記号で表示される'
        ],
        causes: [
          'ブラウザでのファイル保存時に文字エンコーディングが変更された',
          '古いExcelで開いて保存し直した'
        ],
        solutions: [
          {
            step: 1,
            action: '元のCSVファイルを再ダウンロード',
            description: '楽天証券から新しくCSVをダウンロードしてください',
            image: '/assets/images/help/redownload-fresh.png'
          },
          {
            step: 2,
            action: 'ブラウザの設定確認',
            description: 'ダウンロード時の文字エンコーディングをShift-JISまたは自動にしてください',
            image: '/assets/images/help/browser-encoding.png'
          },
          {
            step: 3,
            action: '別のブラウザで試行',
            description: 'Chrome、Firefox、Safari等の別ブラウザでダウンロードしてください',
            image: '/assets/images/help/try-different-browser.png'
          }
        ]
      },
      {
        id: 'unknown-format',
        error: '楽天証券の形式と一致しません',
        symptoms: [
          'プレビューで「形式: UNKNOWN」と表示される',
          'データが正しく解析されない'
        ],
        causes: [
          '楽天証券以外の証券会社のCSVを使用している',
          '楽天証券の画面変更により列名が変わった',
          'CSVファイルが破損している'
        ],
        solutions: [
          {
            step: 1,
            action: '楽天証券のCSVかどうか確認',
            description: 'ダウンロード元が楽天証券であることを確認してください',
            image: '/assets/images/help/confirm-rakuten-source.png'
          },
          {
            step: 2,
            action: '正しいCSV種類の選択',
            description: '日本株・米国株・投資信託の正しいCSVをダウンロードしているか確認',
            image: '/assets/images/help/select-correct-csv-type.png'
          },
          {
            step: 3,
            action: 'ファイルの内容確認',
            description: 'CSVファイルをテキストエディタで開いて、ヘッダー行が正しいか確認',
            image: '/assets/images/help/check-header-row.png'
          }
        ]
      }
    ]
  },
  dataErrors: {
    title: 'データ関連のエラー',
    description: 'CSV内のデータに関する問題の解決方法',
    items: [
      {
        id: 'missing-required',
        error: '必須項目が不足しています',
        symptoms: [
          '一部の取引データがインポートされない',
          'エラーログに「必須項目なし」と表示される'
        ],
        causes: [
          '取引履歴の期間に取引がない',
          'CSVファイルが不完全にダウンロードされた'
        ],
        solutions: [
          {
            step: 1,
            action: '取引履歴の確認',
            description: '指定期間に実際に取引があったか楽天証券で確認してください',
            image: '/assets/images/help/check-transaction-history.png'
          },
          {
            step: 2,
            action: 'CSVの再ダウンロード',
            description: '完全な形でCSVファイルをダウンロードし直してください',
            image: '/assets/images/help/redownload-complete.png'
          },
          {
            step: 3,
            action: '期間の調整',
            description: '取引がある期間に絞ってダウンロードしてください',
            image: '/assets/images/help/adjust-period.png'
          }
        ]
      }
    ]
  },
  systemErrors: {
    title: 'システム関連のエラー',
    description: 'アプリケーションやブラウザに関する問題の解決方法',
    items: [
      {
        id: 'file-too-large',
        error: 'ファイルサイズが大きすぎます',
        symptoms: [
          '処理が途中で停止する',
          'ブラウザが応答しなくなる'
        ],
        causes: [
          '長期間の取引履歴を一度にダウンロードしている',
          'ブラウザのメモリ不足'
        ],
        solutions: [
          {
            step: 1,
            action: '期間を分割してダウンロード',
            description: '1年以内の期間に分けて複数回ダウンロードしてください',
            image: '/assets/images/help/split-period.png'
          },
          {
            step: 2,
            action: 'ブラウザタブの整理',
            description: '他のタブを閉じてメモリを確保してください',
            image: '/assets/images/help/close-other-tabs.png'
          },
          {
            step: 3,
            action: 'ブラウザの再起動',
            description: 'ブラウザを一度閉じて再起動してください',
            image: '/assets/images/help/restart-browser.png'
          }
        ]
      }
    ]
  }
};

export default troubleshootingData;
```

#### Step 1.3: FAQデータ作成

**ファイル**: `src/data/help/faqData.js`

```javascript
/**
 * よくある質問データ
 * @description ユーザーからのよくある質問と回答を定義
 */
export const faqData = {
  general: {
    title: '一般的な質問',
    items: [
      {
        id: 'which-csv',
        question: 'どのCSVファイルをダウンロードすればいいですか？',
        answer: '取引している商品によって異なります。\n\n• 日本株を取引している場合：「国内株式取引履歴」\n• 米国株を取引している場合：「外国株式取引履歴」\n• 投資信託を購入している場合：「投資信託取引履歴」\n\n複数の商品を取引している場合は、それぞれのCSVを個別にダウンロードしてインポートしてください。',
        tags: ['CSV種類', 'ダウンロード', '取引履歴']
      },
      {
        id: 'no-transactions',
        question: '取引履歴がない期間はどうなりますか？',
        answer: '取引がない期間のCSVをダウンロードしても、空のファイルまたはヘッダーのみのファイルになります。この場合は「取引データがありません」というメッセージが表示され、インポートは行われません。\n\n実際に取引があった期間のCSVのみをダウンロードしてください。',
        tags: ['空ファイル', '取引なし', 'エラー']
      },
      {
        id: 'multiple-files',
        question: '複数の期間のCSVを一度にインポートできますか？',
        answer: '現在は1ファイルずつのインポートとなります。複数期間のデータを取り込む場合は、以下の手順で行ってください：\n\n1. 古い期間のCSVから順番にインポート\n2. 重複スキップオプションを有効にして実行\n3. 新しい期間のCSVを続けてインポート\n\n重複データは自動でスキップされるため、同じデータが二重に登録されることはありません。',
        tags: ['複数ファイル', '期間分割', '重複']
      },
      {
        id: 'duplicate-handling',
        question: '重複データは自動で除外されますか？',
        answer: 'はい。「重複（同名資産）をスキップ」オプションが有効になっている場合、既に同じ銘柄のデータが存在する場合は新しいデータの追加をスキップします。\n\nただし、これは銘柄名ベースでの判定となるため、同じ銘柄でも取引日が異なる場合は別の取引として記録されます。',
        tags: ['重複', 'スキップ', 'オプション']
      },
      {
        id: 'edit-after-import',
        question: 'インポート後にデータを修正できますか？',
        answer: '現在のバージョンではインポート後の個別データ修正機能はありません。データに誤りがある場合は、以下の方法で対応してください：\n\n1. 正しいCSVファイルを再度ダウンロード\n2. ブラウザのデータをクリアして再インポート\n3. または、楽天証券側でデータを確認\n\n将来のバージョンでは編集機能の追加を検討しています。',
        tags: ['編集', '修正', 'データ更新']
      }
    ]
  },
  technical: {
    title: '技術的な質問',
    items: [
      {
        id: 'file-size-limit',
        question: '対応しているCSVファイルのサイズ制限は？',
        answer: '推奨されるファイルサイズは50MB以下です。これは概ね以下の取引件数に相当します：\n\n• 日本株：約50,000取引\n• 米国株：約30,000取引\n• 投資信託：約100,000取引\n\nこれを超える場合は、期間を分割してダウンロードすることをお勧めします。',
        tags: ['ファイルサイズ', '制限', 'パフォーマンス']
      },
      {
        id: 'processing-time',
        question: '処理にどのくらい時間がかかりますか？',
        answer: 'ファイルサイズと取引件数によって異なります：\n\n• 1,000件以下：数秒\n• 10,000件程度：10-30秒\n• 50,000件程度：1-3分\n\n処理中は画面を閉じずにお待ちください。進捗が表示されるので確認できます。',
        tags: ['処理時間', 'パフォーマンス', '待機時間']
      },
      {
        id: 'browser-requirements',
        question: 'ブラウザの推奨環境は？',
        answer: '以下のブラウザでの動作を確認しています：\n\n• Google Chrome 90以上\n• Mozilla Firefox 88以上\n• Safari 14以上\n• Microsoft Edge 90以上\n\nInternet Explorerはサポートしていません。最新バージョンのブラウザを使用することをお勧めします。',
        tags: ['ブラウザ', '推奨環境', '動作環境']
      },
      {
        id: 'data-storage',
        question: 'データはどこに保存されますか？',
        answer: 'データはブラウザのローカルストレージに保存されます。これは以下を意味します：\n\n• データはお使いのコンピュータ内にのみ保存\n• インターネット上には送信されません\n• ブラウザのデータを削除すると消去されます\n• 他のデバイスとは同期されません\n\nプライバシーとセキュリティが保護されています。',
        tags: ['データ保存', 'プライバシー', 'ローカルストレージ']
      },
      {
        id: 'security',
        question: 'セキュリティは大丈夫ですか？',
        answer: 'はい、以下のセキュリティ対策を実施しています：\n\n• データは全てローカル（ブラウザ内）で処理\n• 外部サーバーへのデータ送信なし\n• HTTPS接続による暗号化\n• 個人情報の外部保存なし\n\nお客様のデータは安全に保護されています。',
        tags: ['セキュリティ', 'プライバシー', '暗号化']
      }
    ]
  },
  troubleshooting: {
    title: 'トラブル関連',
    items: [
      {
        id: 'import-error',
        question: 'エラーが出てインポートできません',
        answer: 'エラーの種類によって対処法が異なります：\n\n1. ファイル形式エラー：楽天証券の正しいCSVかどうか確認\n2. 文字化けエラー：CSVを再ダウンロード\n3. データエラー：取引履歴の有無を確認\n\n詳細なエラーメッセージを確認して、該当する解決方法をお試しください。解決しない場合は、ファイルの再ダウンロードをお勧めします。',
        tags: ['エラー', 'インポート失敗', 'トラブル']
      },
      {
        id: 'garbled-text',
        question: '文字化けしてしまいます',
        answer: '文字化けは文字エンコーディングの問題です。以下をお試しください：\n\n1. 楽天証券からCSVを再ダウンロード\n2. 別のブラウザでダウンロード\n3. ダウンロード時の設定を確認\n\n特にExcelで開いて保存し直すと文字化けが発生しやすいため、元のCSVファイルを使用してください。',
        tags: ['文字化け', 'エンコーディング', 'Excel']
      },
      {
        id: 'partial-import',
        question: '一部のデータだけインポートされません',
        answer: '部分的なインポートの原因：\n\n1. データ検証エラー：必須項目が不足している行をスキップ\n2. 重複スキップ：既存データと同じ銘柄をスキップ\n3. ファイル破損：一部の行が正しく読み込めない\n\nインポート結果画面で「スキップ」された件数を確認し、元のCSVファイルと比較してください。',
        tags: ['部分インポート', 'スキップ', 'データ検証']
      },
      {
        id: 'file-wont-open',
        question: 'ダウンロードしたファイルが開けません',
        answer: 'ファイルが開けない場合の確認事項：\n\n1. ファイル拡張子が「.csv」になっているか\n2. ファイルサイズが0バイトでないか\n3. ダウンロードが完了しているか\n\nファイル名を右クリックして「プロパティ」で詳細を確認し、問題がある場合は再ダウンロードしてください。',
        tags: ['ファイル', 'ダウンロード', '開けない']
      }
    ]
  }
};

export default faqData;
```

### Phase 2: UI コンポーネントの作成

#### Step 2.1: ヘルプモーダルコンポーネント作成

**ファイル**: `src/ui/components/HelpModal.js`

```javascript
/**
 * HelpModal - ヘルプ表示用モーダルコンポーネント
 * @description CSV取り込み画面で表示するヘルプモーダル
 */
export class HelpModal {
  constructor() {
    this.isVisible = false;
    this.currentContent = null;
    this.callbacks = {
      onClose: null
    };
  }

  /**
   * モーダル表示
   * @param {string} contentType - 表示コンテンツタイプ（'download'|'troubleshooting'|'faq'）
   * @param {Object} [options={}] - 表示オプション
   */
  show(contentType, options = {}) {
    this.currentContent = contentType;
    this.isVisible = true;
    
    const modalHtml = this.#generateModalHtml(contentType, options);
    
    // モーダルを DOM に追加
    let modalContainer = document.getElementById('helpModal');
    if (!modalContainer) {
      modalContainer = document.createElement('div');
      modalContainer.id = 'helpModal';
      document.body.appendChild(modalContainer);
    }
    
    modalContainer.innerHTML = modalHtml;
    modalContainer.classList.add('modal-active');
    
    this.#bindModalEvents();
    
    // Lucideアイコン再初期化
    if (typeof lucide !== 'undefined' && lucide.createIcons) {
      lucide.createIcons();
    }
  }

  /**
   * モーダル非表示
   */
  hide() {
    this.isVisible = false;
    const modalContainer = document.getElementById('helpModal');
    if (modalContainer) {
      modalContainer.classList.remove('modal-active');
      modalContainer.innerHTML = '';
    }
    
    if (this.callbacks.onClose) {
      this.callbacks.onClose();
    }
  }

  /**
   * 閉じるイベントのコールバック設定
   */
  onClose(handler) {
    this.callbacks.onClose = handler;
  }

  // =============================
  // Private Methods
  // =============================

  #generateModalHtml(contentType, options) {
    const contentHtml = this.#getContentHtml(contentType, options);
    
    return `
      <div class="modal-overlay" id="modalOverlay">
        <div class="modal-dialog help-modal">
          <div class="modal-header">
            <h2 class="modal-title">
              <i data-lucide="help-circle" class="h-5 w-5"></i>
              ${this.#getModalTitle(contentType)}
            </h2>
            <button id="modalCloseBtn" class="modal-close-btn">
              <i data-lucide="x" class="h-5 w-5"></i>
            </button>
          </div>
          <div class="modal-body">
            ${contentHtml}
          </div>
          <div class="modal-footer">
            <button id="modalCloseFooterBtn" class="btn btn-secondary">
              閉じる
            </button>
          </div>
        </div>
      </div>
    `;
  }

  #getModalTitle(contentType) {
    const titles = {
      download: '📥 CSVダウンロード手順',
      troubleshooting: '🔧 トラブルシューティング',
      faq: '❓ よくある質問'
    };
    return titles[contentType] || 'ヘルプ';
  }

  #getContentHtml(contentType, options) {
    switch (contentType) {
      case 'download':
        return this.#generateDownloadGuideHtml(options.csvType || 'JP');
      case 'troubleshooting':
        return this.#generateTroubleshootingHtml();
      case 'faq':
        return this.#generateFaqHtml();
      default:
        return '<p>コンテンツが見つかりません。</p>';
    }
  }

  #generateDownloadGuideHtml(csvType) {
    // csvDownloadGuide データを使用してHTML生成
    // 実装詳細は省略（長くなるため）
    return `
      <div class="download-guide">
        <div class="csv-type-selector">
          <label>CSV種類:</label>
          <select id="csvTypeSelector" class="form-select">
            <option value="JP" ${csvType === 'JP' ? 'selected' : ''}>日本株式</option>
            <option value="US" ${csvType === 'US' ? 'selected' : ''}>米国株式</option>
            <option value="INVST" ${csvType === 'INVST' ? 'selected' : ''}>投資信託</option>
          </select>
        </div>
        <div id="downloadSteps" class="download-steps">
          <!-- 動的に生成されるステップ内容 -->
        </div>
      </div>
    `;
  }

  #generateTroubleshootingHtml() {
    // troubleshootingData を使用してHTML生成
    return `
      <div class="troubleshooting-guide">
        <div class="error-categories">
          <div class="category-tabs">
            <button class="tab-btn active" data-category="fileErrors">
              ファイル関連
            </button>
            <button class="tab-btn" data-category="dataErrors">
              データ関連
            </button>
            <button class="tab-btn" data-category="systemErrors">
              システム関連
            </button>
          </div>
          <div id="troubleshootingContent" class="tab-content">
            <!-- 動的に生成されるトラブル解決内容 -->
          </div>
        </div>
      </div>
    `;
  }

  #generateFaqHtml() {
    // faqData を使用してHTML生成
    return `
      <div class="faq-guide">
        <div class="faq-search">
          <input type="text" id="faqSearch" placeholder="質問を検索..." class="form-input">
          <i data-lucide="search" class="search-icon"></i>
        </div>
        <div class="faq-categories">
          <div class="category-tabs">
            <button class="tab-btn active" data-category="general">
              一般的な質問
            </button>
            <button class="tab-btn" data-category="technical">
              技術的な質問
            </button>
            <button class="tab-btn" data-category="troubleshooting">
              トラブル関連
            </button>
          </div>
          <div id="faqContent" class="faq-accordion">
            <!-- 動的に生成されるFAQ内容 -->
          </div>
        </div>
      </div>
    `;
  }

  #bindModalEvents() {
    // 閉じるボタンのイベント
    const closeBtn = document.getElementById('modalCloseBtn');
    const closeFooterBtn = document.getElementById('modalCloseFooterBtn');
    const overlay = document.getElementById('modalOverlay');

    if (closeBtn) {
      closeBtn.addEventListener('click', () => this.hide());
    }
    if (closeFooterBtn) {
      closeFooterBtn.addEventListener('click', () => this.hide());
    }
    if (overlay) {
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) this.hide();
      });
    }

    // ESCキーで閉じる
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && this.isVisible) {
        this.hide();
      }
    });

    // コンテンツ固有のイベント
    this.#bindContentEvents();
  }

  #bindContentEvents() {
    if (this.currentContent === 'download') {
      const csvTypeSelector = document.getElementById('csvTypeSelector');
      if (csvTypeSelector) {
        csvTypeSelector.addEventListener('change', (e) => {
          this.#updateDownloadSteps(e.target.value);
        });
      }
    }
    
    if (this.currentContent === 'troubleshooting' || this.currentContent === 'faq') {
      const tabBtns = document.querySelectorAll('.tab-btn');
      tabBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
          this.#switchTab(e.target.dataset.category);
        });
      });
    }

    if (this.currentContent === 'faq') {
      const searchInput = document.getElementById('faqSearch');
      if (searchInput) {
        searchInput.addEventListener('input', (e) => {
          this.#filterFaq(e.target.value);
        });
      }
    }
  }

  #updateDownloadSteps(csvType) {
    // CSV種類に応じてダウンロード手順を更新
    const stepsContainer = document.getElementById('downloadSteps');
    if (stepsContainer) {
      // csvDownloadGuide[csvType] のデータを使用してHTML生成
      // 実装詳細は省略
    }
  }

  #switchTab(category) {
    // タブ切り替え処理
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.classList.remove('active');
    });
    document.querySelector(`[data-category="${category}"]`).classList.add('active');
    
    // コンテンツ更新
    this.#updateTabContent(category);
  }

  #updateTabContent(category) {
    // カテゴリに応じてコンテンツを更新
    // 実装詳細は省略
  }

  #filterFaq(searchTerm) {
    // FAQ検索フィルタリング処理
    // 実装詳細は省略
  }
}

export default HelpModal;
```

### Phase 3: 既存ファイルの修正

#### Step 3.1: CsvImportView.js の修正

**ファイル**: `src/ui/views/CsvImportView.js`

**修正内容**:

```javascript
// 【修正】import文に HelpModal を追加
import { HelpModal } from '../components/HelpModal.js';

export class CsvImportView {
  constructor() {
    this.container = document.getElementById('mainContent');
    // 【追加】ヘルプモーダルのインスタンス化
    this.helpModal = new HelpModal();
    this.callbacks = {
      onParse: null,
      onImport: null,
      onFileSelected: null
    };
  }

  render() {
    if (!this.container) return;

    this.container.innerHTML = this.#template();
    this.#bindDomRefs();
    this.#bindEvents();

    // Lucideアイコン初期化
    if (typeof lucide !== 'undefined' && lucide.createIcons) {
      lucide.createIcons();
    }
  }

  // 【修正】#template() メソッドにヘルプボタンを追加
  #template() {
    return `
      <div class="mx-auto max-w-2xl space-y-6">
        <div class="text-center">
          <h1 class="text-2xl font-bold">CSV取り込み</h1>
          <p class="text-sm text-muted mt-1">楽天証券の取引履歴（JP/US/投信）を取り込みます</p>
          <!-- 【追加】ヘルプボタン群 -->
          <div class="help-buttons mt-3 flex justify-center gap-2">
            <button id="downloadGuideBtn" class="btn-help text-xs px-3 py-1 rounded-full">
              <i data-lucide="download" class="h-3 w-3"></i>
              ダウンロード手順
            </button>
            <button id="troubleshootingBtn" class="btn-help text-xs px-3 py-1 rounded-full">
              <i data-lucide="tool" class="h-3 w-3"></i>
              トラブル解決
            </button>
            <button id="faqBtn" class="btn-help text-xs px-3 py-1 rounded-full">
              <i data-lucide="help-circle" class="h-3 w-3"></i>
              よくある質問
            </button>
          </div>
        </div>

        <div class="card rounded-lg p-4">
          <div class="mb-3 font-medium flex items-center justify-between">
            <span>ファイル選択</span>
            <!-- 【追加】ファイル選択エリアのヘルプアイコン -->
            <button id="fileSelectionHelpBtn" class="help-icon-btn">
              <i data-lucide="help-circle" class="h-4 w-4 text-gray-400"></i>
            </button>
          </div>
          
          <div id="dropZone" class="border-2 border-dashed rounded-lg p-6 text-center hover:bg-gray-50 cursor-pointer">
            <i data-lucide="upload" class="h-6 w-6 mx-auto mb-2"></i>
            <div class="text-sm">ここにCSVをドラッグ&ドロップ</div>
            <div class="text-xs text-muted">または</div>
            <div class="mt-2">
              <input id="csvFile" type="file" accept=".csv,text/csv" class="text-sm" />
            </div>
            <!-- 【追加】サポートファイル形式の説明 -->
            <div class="text-xs text-muted mt-2">
              対応形式: 楽天証券CSV (.csv) | 最大サイズ: 50MB
            </div>
          </div>

          <div class="mt-4 flex items-center gap-4">
            <label class="flex items-center gap-2 text-sm">
              <input id="optDedupe" type="checkbox" class="accent-blue-600" checked>
              重複（同名資産）をスキップ
              <!-- 【追加】オプション説明のヘルプアイコン -->
              <button class="help-icon-btn" data-help="dedupe">
                <i data-lucide="help-circle" class="h-3 w-3 text-gray-400"></i>
              </button>
            </label>
            <label class="flex items-center gap-2 text-sm">
              <input id="optDryRun" type="checkbox" class="accent-blue-600">
              ドライラン（保存しない）
              <!-- 【追加】オプション説明のヘルプアイコン -->
              <button class="help-icon-btn" data-help="dryrun">
                <i data-lucide="help-circle" class="h-3 w-3 text-gray-400"></i>
              </button>
            </label>
          </div>

          <div class="mt-4 flex gap-2">
            <button id="parseBtn" class="btn btn-secondary rounded-md px-3 py-2 flex items-center gap-2">
              <i data-lucide="eye" class="h-4 w-4"></i>
              プレビュー
            </button>
            <button id="importBtn" class="btn btn-primary rounded-md px-3 py-2 flex items-center gap-2">
              <i data-lucide="check-circle" class="h-4 w-4"></i>
              インポート
            </button>
            <div id="statusArea" class="ml-auto text-sm"></div>
          </div>
        </div>

        <div id="previewArea"></div>
        <div id="resultArea"></div>
      </div>
    `;
  }

  // 【修正】#bindEvents() メソッドにヘルプボタンのイベントを追加
  #bindEvents() {
    // 既存のイベント処理...
    
    // 【追加】ヘルプボタンのイベント処理
    const downloadGuideBtn = document.getElementById('downloadGuideBtn');
    const troubleshootingBtn = document.getElementById('troubleshootingBtn');
    const faqBtn = document.getElementById('faqBtn');
    const fileSelectionHelpBtn = document.getElementById('fileSelectionHelpBtn');

    if (downloadGuideBtn) {
      downloadGuideBtn.addEventListener('click', () => {
        this.helpModal.show('download', { csvType: 'JP' });
      });
    }

    if (troubleshootingBtn) {
      troubleshootingBtn.addEventListener('click', () => {
        this.helpModal.show('troubleshooting');
      });
    }

    if (faqBtn) {
      faqBtn.addEventListener('click', () => {
        this.helpModal.show('faq');
      });
    }

    if (fileSelectionHelpBtn) {
      fileSelectionHelpBtn.addEventListener('click', () => {
        this.helpModal.show('download', { csvType: 'JP' });
      });
    }

    // 【追加】オプション説明のヘルプアイコン
    const helpIconBtns = document.querySelectorAll('.help-icon-btn[data-help]');
    helpIconBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const helpType = e.currentTarget.dataset.help;
        this.#showInlineHelp(helpType, e.currentTarget);
      });
    });

    // 【追加】既存のドロップゾーンイベント...
    if (this.dropZone) {
      // ドラッグ&ドロップイベント（既存コード）
    }

    if (this.fileInput) {
      // ファイル選択イベント（既存コード）
    }

    if (this.parseBtn) {
      // プレビューボタンイベント（既存コード）
    }

    if (this.importBtn) {
      // インポートボタンイベント（既存コード）
    }
  }

  // 【追加】インラインヘルプ表示メソッド
  #showInlineHelp(helpType, targetElement) {
    const helpTexts = {
      dedupe: '既に同じ銘柄名のデータがある場合、新しいデータの追加をスキップします。重複を避けたい場合は有効にしてください。',
      dryrun: '実際にはデータを保存せず、インポートされる件数のみを確認できます。事前確認に便利です。'
    };

    const helpText = helpTexts[helpType];
    if (!helpText) return;

    // ツールチップ風の表示
    this.#showTooltip(targetElement, helpText);
  }

  // 【追加】ツールチップ表示メソッド
  #showTooltip(targetElement, text) {
    // 既存のツールチップを削除
    const existingTooltip = document.querySelector('.help-tooltip');
    if (existingTooltip) {
      existingTooltip.remove();
    }

    // ツールチップ要素作成
    const tooltip = document.createElement('div');
    tooltip.className = 'help-tooltip';
    tooltip.innerHTML = `
      <div class="tooltip-content">
        ${text}
        <button class="tooltip-close">&times;</button>
      </div>
    `;

    // 位置計算
    const rect = targetElement.getBoundingClientRect();
    tooltip.style.position = 'absolute';
    tooltip.style.top = (rect.bottom + window.scrollY + 5) + 'px';
    tooltip.style.left = (rect.left + window.scrollX) + 'px';
    tooltip.style.zIndex = '1000';

    document.body.appendChild(tooltip);

    // 閉じるボタンイベント
    const closeBtn = tooltip.querySelector('.tooltip-close');
    closeBtn.addEventListener('click', () => {
      tooltip.remove();
    });

    // 3秒後に自動で閉じる
    setTimeout(() => {
      if (tooltip.parentNode) {
        tooltip.remove();
      }
    }, 3000);
  }
}
```

#### Step 3.2: CsvImportController.js の修正

**ファイル**: `src/ui/controllers/CsvImportController.js`

**修正内容**:

```javascript
// 【修正】既存のCsvImportControllerクラスに、エラー時のヘルプ表示機能を追加

  // 【修正】onParse メソッドのエラーハンドリング強化
  bindEvents() {
    this.view.onParse(async () => {
      if (!this.currentFile) {
        this.view.hideLoading('CSVファイルを選択してください');
        // 【追加】ファイル未選択時のヘルプ表示
        this.#showContextualHelp('file-selection');
        return;
      }
      try {
        this.view.showLoading('プレビュー解析中...');
        const preview = await this.service.parseAndPreview(this.currentFile);
        this.lastPreview = preview;
        this.view.showPreview(preview);
        this.view.hideLoading('プレビュー完了');
      } catch (e) {
        console.error('[CsvImportController.js] onParse エラー:', e?.message || e);
        this.view.hideLoading('解析に失敗しました');
        // 【追加】エラー種別に応じたヘルプ表示
        this.#showErrorHelp(e);
      }
    });

    this.view.onImport(async (options) => {
      if (!this.currentFile) {
        this.view.hideLoading('CSVファイルを選択してください');
        // 【追加】ファイル未選択時のヘルプ表示
        this.#showContextualHelp('file-selection');
        return;
      }
      try {
        this.view.showLoading('インポート中...');
        const { upsert } = await this.service.parseAndImport(this.currentFile, null, null, options);
        const resultForView = { imported: upsert.inserted || 0, skipped: upsert.skipped || 0, errors: [] };
        this.view.showResult(resultForView);
        this.view.hideLoading(options?.dryRun ? 'ドライラン完了' : 'インポート完了');

        // 実インポート時はダッシュボードを更新
        if (!options?.dryRun && this.dashboardController && typeof this.dashboardController.refreshData === 'function') {
          await this.dashboardController.refreshData();
        }

        // ナビゲーションのハイライト整合: ダッシュボードへ遷移
        if (!options?.dryRun && window.app && window.app.router && typeof window.app.router.navigate === 'function') {
          await window.app.router.navigate('dashboard');
        }
      } catch (e) {
        console.error('[CsvImportController.js] onImport エラー:', e?.message || e);
        this.view.hideLoading('インポートに失敗しました');
        // 【追加】エラー種別に応じたヘルプ表示
        this.#showErrorHelp(e);
      }
    });

    // 既存のファイル選択イベント...
  }

  // 【追加】コンテキストに応じたヘルプ表示
  #showContextualHelp(context) {
    switch (context) {
      case 'file-selection':
        // ファイル選択のヘルプを表示
        if (this.view.helpModal) {
          this.view.helpModal.show('download', { csvType: 'JP' });
        }
        break;
      default:
        break;
    }
  }

  // 【追加】エラー種別に応じたヘルプ表示
  #showErrorHelp(error) {
    const errorMessage = error?.message || error;
    
    // エラーメッセージからエラー種別を判定
    let helpContent = 'troubleshooting';
    let helpOptions = {};

    if (errorMessage.includes('CSVファイルではありません')) {
      helpOptions.errorType = 'invalid-csv';
    } else if (errorMessage.includes('文字化け') || errorMessage.includes('エンコーディング')) {
      helpOptions.errorType = 'encoding-error';
    } else if (errorMessage.includes('楽天証券の形式と一致しません')) {
      helpOptions.errorType = 'unknown-format';
    } else if (errorMessage.includes('必須項目が不足')) {
      helpOptions.errorType = 'missing-required';
    } else if (errorMessage.includes('ファイルサイズが大きすぎます')) {
      helpOptions.errorType = 'file-too-large';
    }

    // ヘルプモーダルを表示
    if (this.view.helpModal) {
      this.view.helpModal.show(helpContent, helpOptions);
    }
  }
}
```

#### Step 3.3: CSSスタイルの追加

**ファイル**: `public/index.html` （既存ファイルの`<style>`セクションに追加）

**追加内容**:

```css
/* 【追加】ヘルプ機能用スタイル */

/* ヘルプボタン */
.btn-help {
  background-color: var(--secondary);
  color: white;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
}

.btn-help:hover {
  background-color: var(--accent);
  transform: translateY(-1px);
}

.help-icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 2px;
  border-radius: 50%;
  transition: background-color 0.2s ease;
}

.help-icon-btn:hover {
  background-color: var(--muted);
}

/* ヘルプモーダル */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.modal-active .modal-overlay {
  opacity: 1;
  visibility: visible;
}

.modal-dialog {
  background: var(--background);
  border-radius: 8px;
  max-width: 800px;
  max-height: 90vh;
  width: 90%;
  overflow: hidden;
  transform: scale(0.9);
  transition: transform 0.3s ease;
}

.modal-active .modal-dialog {
  transform: scale(1);
}

.help-modal {
  max-width: 900px;
}

.modal-header {
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: between;
}

.modal-title {
  margin: 0;
  font-size: 1.25rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  flex: 1;
}

.modal-close-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

.modal-close-btn:hover {
  background-color: var(--muted);
}

.modal-body {
  padding: 1.5rem;
  max-height: 60vh;
  overflow-y: auto;
}

.modal-footer {
  padding: 1rem 1.5rem;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: flex-end;
  gap: 0.5rem;
}

/* ダウンロードガイド */
.download-guide .csv-type-selector {
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.download-guide .csv-type-selector label {
  font-weight: 500;
}

.form-select {
  padding: 0.5rem;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--background);
}

.download-steps {
  space-y: 1.5rem;
}

.download-step {
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1rem;
  background: var(--card);
}

.step-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 0.75rem;
}

.step-number {
  background: var(--primary);
  color: white;
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.875rem;
}

.step-title {
  font-weight: 600;
  font-size: 1rem;
}

.step-image {
  max-width: 100%;
  height: auto;
  border: 1px solid var(--border);
  border-radius: 4px;
  margin: 0.75rem 0;
}

.step-note {
  background: var(--muted);
  padding: 0.75rem;
  border-radius: 4px;
  font-size: 0.875rem;
  margin-top: 0.75rem;
}

/* トラブルシューティング */
.troubleshooting-guide .category-tabs {
  display: flex;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}

.tab-btn {
  background: none;
  border: none;
  padding: 0.75rem 1rem;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s ease;
}

.tab-btn.active {
  border-bottom-color: var(--primary);
  color: var(--primary);
  font-weight: 500;
}

.tab-btn:hover {
  background-color: var(--muted);
}

.error-item {
  border: 1px solid var(--border);
  border-radius: 8px;
  margin-bottom: 1rem;
  overflow: hidden;
}

.error-header {
  background: var(--card);
  padding: 1rem;
  border-bottom: 1px solid var(--border);
}

.error-title {
  font-weight: 600;
  color: var(--destructive);
  margin-bottom: 0.5rem;
}

.error-symptoms {
  font-size: 0.875rem;
  color: var(--muted-foreground);
}

.solution-steps {
  padding: 1rem;
}

.solution-step {
  display: flex;
  gap: 1rem;
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border);
}

.solution-step:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.solution-number {
  background: var(--accent);
  color: white;
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: bold;
  flex-shrink: 0;
}

.solution-content {
  flex: 1;
}

.solution-action {
  font-weight: 500;
  margin-bottom: 0.25rem;
}

.solution-description {
  font-size: 0.875rem;
  color: var(--muted-foreground);
}

/* FAQ */
.faq-guide .faq-search {
  position: relative;
  margin-bottom: 1rem;
}

.form-input {
  width: 100%;
  padding: 0.75rem 2.5rem 0.75rem 1rem;
  border: 1px solid var(--border);
  border-radius: 4px;
  background: var(--background);
}

.search-icon {
  position: absolute;
  right: 0.75rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--muted-foreground);
}

.faq-accordion {
  space-y: 0.5rem;
}

.faq-item {
  border: 1px solid var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.faq-question {
  width: 100%;
  background: var(--card);
  border: none;
  padding: 1rem;
  text-align: left;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 500;
  transition: background-color 0.2s ease;
}

.faq-question:hover {
  background: var(--muted);
}

.faq-answer {
  padding: 1rem;
  background: var(--background);
  border-top: 1px solid var(--border);
  white-space: pre-line;
  line-height: 1.6;
  display: none;
}

.faq-item.active .faq-answer {
  display: block;
}

.faq-tags {
  margin-top: 0.75rem;
  display: flex;
  gap: 0.25rem;
  flex-wrap: wrap;
}

.faq-tag {
  background: var(--muted);
  color: var(--muted-foreground);
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  font-size: 0.75rem;
}

/* ツールチップ */
.help-tooltip {
  position: absolute;
  z-index: 1001;
  background: var(--background);
  border: 1px solid var(--border);
  border-radius: 4px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  max-width: 300px;
}

.tooltip-content {
  padding: 0.75rem;
  font-size: 0.875rem;
  line-height: 1.4;
  position: relative;
}

.tooltip-close {
  position: absolute;
  top: 0.25rem;
  right: 0.25rem;
  background: none;
  border: none;
  font-size: 1rem;
  cursor: pointer;
  color: var(--muted-foreground);
  width: 1.5rem;
  height: 1.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
}

.tooltip-close:hover {
  background: var(--muted);
}

/* レスポンシブ対応 */
@media (max-width: 768px) {
  .modal-dialog {
    width: 95%;
    max-height: 95vh;
  }
  
  .help-modal {
    max-width: none;
  }
  
  .modal-body {
    padding: 1rem;
    max-height: 70vh;
  }
  
  .help-buttons {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .solution-step {
    flex-direction: column;
    gap: 0.5rem;
  }
}
```

#### Step 3.4: Router.js の修正（オプション）

**ファイル**: `src/ui/Router.js`

**修正内容**:

```javascript
// 【追加】専用ヘルプページのルート追加（必要に応じて）

  // 【修正】routes定義に help ルートを追加
  this.routes = {
    'dashboard': () => this.dashboardController.initialize(),
    'csv-import': () => this.csvImportController.initialize(),
    'database': () => this.databaseController.initialize(),
    'help': () => this.helpController.initialize(), // 【追加】
    'asset-form': () => this.assetFormController.initialize()
  };
```

## 4. 実装スケジュール

### 今日の実装推奨順序

#### 【優先度：高】今日実装すべき項目（2-3時間）

1. **データファイル作成**（30分）
   - `csvDownloadGuide.js` の作成
   - `troubleshootingData.js` の作成  
   - `faqData.js` の作成

2. **基本ヘルプモーダル実装**（1時間）
   - `HelpModal.js` の基本構造作成
   - 基本的な表示・非表示機能

3. **CsvImportView.js 修正**（1時間）
   - ヘルプボタンの追加
   - モーダル表示イベントの追加

4. **CSS追加**（30分）
   - 基本的なモーダル・ヘルプスタイル追加

#### 【優先度：中】明日以降の実装項目

1. **詳細機能実装**（2-3時間）
   - ダウンロードガイドの動的生成
   - トラブルシューティングの詳細表示
   - FAQ検索機能

2. **エラー連携機能**（1-2時間）
   - Controller側のエラーハンドリング強化
   - エラー時の自動ヘルプ表示

3. **UI/UX改善**（1-2時間）
   - レスポンシブ対応
   - アニメーション追加
   - アクセシビリティ対応

## 5. テスト計画

### 動作確認項目

#### 基本機能テスト
- [ ] ヘルプボタンクリックでモーダル表示
- [ ] CSV種類選択でガイド内容変更
- [ ] FAQ検索機能の動作
- [ ] モーダル閉じる動作（×ボタン、ESCキー、オーバーレイクリック）

#### エラー連携テスト
- [ ] ファイル未選択時のヘルプ表示
- [ ] CSV形式エラー時のトラブルシューティング表示
- [ ] 文字化けエラー時の解決手順表示

#### レスポンシブテスト
- [ ] スマートフォンでのモーダル表示
- [ ] タブレットでの表示確認
- [ ] 画面サイズ変更時の適切な表示

---

**実装開始**: この計画書に基づいて、まずはデータファイルの作成から始めることをお勧めします。段階的に実装することで、機能を確認しながら進められます。

<function_calls>
<invoke name="TodoWrite">
<parameter name="todos">[{"id": "1", "content": "\u30e6\u30fc\u30b6\u30fc\u30ac\u30a4\u30c0\u30f3\u30b9\u6a5f\u80fd\u306e\u8981\u4ef6\u5b9a\u7fa9\u66f8\u3092\u4f5c\u6210", "status": "completed"}, {"id": "2", "content": "\u30e6\u30fc\u30b6\u30fc\u30ac\u30a4\u30c0\u30f3\u30b9\u6a5f\u80fd\u306e\u5b9f\u88c5\u8a08\u753b\u66f8\u3092\u4f5c\u6210\uff08\u5177\u4f53\u7684\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\u6307\u793a\u542b\u3080\uff09", "status": "completed"}]