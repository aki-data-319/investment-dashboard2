# ユーザーガイダンス機能 要件定義書

**作成日**: 2025-09-23  
**対象バージョン**: Investment Dashboard v2  
**作成者**: Claude Code  

## 概要

CSV取り込み機能において、初心者ユーザーが迷わず操作できるようにするためのユーザーガイダンス機能の要件を定義します。楽天証券でのCSVダウンロード手順から、エラー解決まで、包括的なユーザーサポート機能を提供します。

## 1. 背景・課題

### 1.1 現在の課題
- **初心者ユーザーの操作困難**: 楽天証券でのCSVダウンロード方法が分からない
- **エラー時の対処方法不明**: エラーが発生した際の解決手順が提供されていない
- **機能説明の不足**: CSV取り込み機能の使い方や注意点の説明が不十分
- **トラブルシューティングの欠如**: よくある問題への対処方法が整理されていない

### 1.2 ターゲットユーザー
- **投資初心者**: 楽天証券を使い始めたばかりのユーザー
- **ITリテラシー低めのユーザー**: デジタルツールに慣れていないユーザー
- **トラブル解決を急ぐユーザー**: エラーが発生して困っているユーザー

## 2. 機能要件

### 2.1 楽天証券CSVダウンロード手順ガイド

#### F1.1 ステップバイステップガイド
- **目的**: 楽天証券サイトでのCSVダウンロード方法を分かりやすく説明
- **形式**: 画像付きの手順書
- **対象CSV**: 日本株・米国株・投資信託の3種類

#### F1.2 必要な手順内容
1. 楽天証券にログイン
2. 各種取引履歴画面への遷移方法
3. CSVダウンロードボタンの場所
4. ダウンロード設定（期間指定等）
5. ファイル保存方法
6. ダウンロードファイルの確認方法

#### F1.3 注意事項・Tips
- ダウンロード可能な期間制限
- ファイル名の命名規則
- 複数期間に分けてダウンロードする場合の手順
- ブラウザ別のダウンロード動作の違い

### 2.2 エラー時の対処方法ガイド

#### F2.1 エラー分類別対処法
**ファイル関連エラー**:
- 「CSVファイルではありません」→ ファイル形式確認手順
- 「文字化けしています」→ エンコーディング問題の解決法
- 「楽天証券の形式と一致しません」→ 正しいCSVダウンロード手順への誘導

**データ関連エラー**:
- 「必須項目が不足しています」→ 不完全なCSVファイルの対処法
- 「日付形式が正しくありません」→ データ異常時の確認方法
- 「インポートに失敗しました」→ 段階的な問題切り分け手順

**システム関連エラー**:
- 「ファイルサイズが大きすぎます」→ 分割ダウンロード方法
- 「処理がタイムアウトしました」→ ブラウザ設定確認
- 「保存に失敗しました」→ ブラウザストレージ問題の解決

#### F2.2 段階的トラブルシューティング
1. **基本確認事項**: ファイル形式、サイズ、ブラウザ環境
2. **簡単な解決策**: ページ更新、ファイル再ダウンロード
3. **詳細確認**: CSVファイル内容の目視確認
4. **代替手段**: 別期間でのダウンロード、ブラウザ変更
5. **サポート連絡**: 解決できない場合の連絡方法

### 2.3 FAQ・よくある質問

#### F3.1 一般的な質問
- Q: どのCSVファイルをダウンロードすればいいですか？
- Q: 取引履歴がない期間はどうなりますか？
- Q: 複数の期間のCSVを一度にインポートできますか？
- Q: 重複データは自動で除外されますか？
- Q: インポート後にデータを修正できますか？

#### F3.2 技術的な質問
- Q: 対応しているCSVファイルのサイズ制限は？
- Q: 処理にどのくらい時間がかかりますか？
- Q: ブラウザの推奨環境は？
- Q: データはどこに保存されますか？
- Q: セキュリティは大丈夫ですか？

#### F3.3 トラブル関連質問
- Q: エラーが出てインポートできません
- Q: 文字化けしてしまいます
- Q: 一部のデータだけインポートされません
- Q: ダウンロードしたファイルが開けません

### 2.4 機能説明・使い方ガイド

#### F4.1 CSV取り込み機能の概要説明
- 機能の目的と効果
- 対応している証券会社（楽天証券）
- 取り込み可能なデータ種類
- 処理の流れの概要

#### F4.2 操作手順ガイド
1. ファイル選択方法（ドラッグ&ドロップ、ファイル選択）
2. プレビュー機能の使い方
3. オプション設定の説明（重複スキップ、ドライラン）
4. インポート実行と結果確認
5. ダッシュボードでの確認方法

#### F4.3 Tips・ベストプラクティス
- 効率的なデータ取り込み方法
- データ品質を保つための注意点
- 定期的なデータ更新の推奨方法

## 3. 非機能要件

### 3.1 ユーザビリティ要件
- **理解しやすさ**: 投資初心者でも理解できる平易な日本語
- **視覚的分かりやすさ**: スクリーンショット、図解を多用
- **検索しやすさ**: キーワード検索、カテゴリ分類
- **アクセシビリティ**: 文字サイズ調整、色覚障害対応

### 3.2 保守性要件
- **更新容易性**: 楽天証券の画面変更に対応しやすい構造
- **拡張性**: 他証券会社対応時の追加容易性
- **コンテンツ管理**: 非技術者でも更新可能な仕組み

### 3.3 パフォーマンス要件
- **表示速度**: ガイド画面の表示は3秒以内
- **画像読み込み**: スクリーンショットの表示は2秒以内
- **検索応答**: FAQ検索結果は1秒以内

## 4. UI/UX要件

### 4.1 ガイド表示方式
- **インラインヘルプ**: CSV取り込み画面内でのヘルプ表示
- **モーダルウィンドウ**: 詳細ガイドのポップアップ表示
- **専用ヘルプページ**: 包括的なガイド・FAQ専用画面
- **コンテキストヘルプ**: 各入力項目近くのヘルプアイコン

### 4.2 ナビゲーション設計
```
ヘルプメニュー構成:
├── 📖 はじめに
│   ├── CSV取り込み機能とは
│   └── 準備事項
├── 📥 CSVダウンロード手順
│   ├── 日本株式取引履歴
│   ├── 米国株式取引履歴
│   └── 投資信託取引履歴
├── 💻 操作手順ガイド
│   ├── ファイル選択
│   ├── プレビュー確認
│   └── インポート実行
├── ❗ トラブルシューティング
│   ├── エラー解決方法
│   └── よくある問題
└── ❓ FAQ
    ├── 一般的な質問
    └── 技術的な質問
```

### 4.3 コンテンツ表示形式
- **手順ガイド**: 番号付きステップ + スクリーンショット
- **エラーガイド**: アラートボックス + 解決手順
- **FAQ**: 折りたたみ式Q&A形式
- **Tips**: ハイライトボックスで重要ポイント表示

## 5. コンテンツ要件

### 5.1 スクリーンショット要件
- **楽天証券画面**: ログイン〜CSVダウンロードまでの全画面
- **ファイル保存画面**: ブラウザ別のダウンロード画面
- **アプリケーション画面**: CSV取り込みの各ステップ画面
- **エラー画面**: 主要なエラーメッセージの表示例

### 5.2 文書品質要件
- **正確性**: 楽天証券の実際の画面・手順と一致
- **最新性**: 四半期ごとの内容確認・更新
- **一貫性**: 用語・表記の統一
- **完全性**: 必要な情報の漏れなし

### 5.3 多言語対応（将来拡張）
- 基本は日本語のみ
- 将来的には英語対応も検討

## 6. 成功指標

### 6.1 ユーザビリティ指標
- **初回利用成功率**: 90%以上（ガイド参照でのCSV取り込み成功）
- **エラー自己解決率**: 80%以上（ガイドを見てエラー解決）
- **ガイド利用率**: 50%以上（初回ユーザーのガイド参照率）

### 6.2 コンテンツ品質指標
- **ガイド満足度**: 4.0/5.0以上
- **情報の正確性**: 95%以上（実際の画面との一致率）
- **問題解決率**: 85%以上（FAQ・トラブルシューティング）

### 6.3 保守性指標
- **更新頻度**: 四半期1回以上
- **更新作業時間**: 2時間以内（軽微な修正）
- **ユーザーフィードバック対応率**: 100%（1週間以内）

## 7. 制約事項

### 7.1 技術的制約
- 楽天証券の画面変更に依存
- ブラウザ環境による表示差異
- スクリーンショットの解像度制限

### 7.2 リソース制約
- 定期的な画面更新確認が必要
- 多数のスクリーンショット管理
- ユーザーフィードバックの継続的収集

### 7.3 法的・規約制約
- 楽天証券の画面利用に関する著作権
- 個人情報の表示に関する注意
- 金融商品取引に関する注意喚起

---

**次のステップ**: この要件定義に基づいて、具体的な実装計画と必要なファイル修正内容を詳細化します。