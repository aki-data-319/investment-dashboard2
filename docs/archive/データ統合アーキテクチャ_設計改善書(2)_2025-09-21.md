# ãƒ‡ãƒ¼ã‚¿çµ±åˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ - è¨­è¨ˆæ”¹å–„æ›¸

**ä½œæˆæ—¥**: 2025å¹´9æœˆ21æ—¥  
**å•é¡Œ**: ç•°ãªã‚‹CSVå½¢å¼ãƒ‡ãƒ¼ã‚¿ã®çµ±ä¸€ç®¡ç†ãƒ»æ¨™æº–åŒ–è¨­è¨ˆ  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: æŠ•è³‡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ v2  
**é‡è¦åº¦**: ğŸ”´ ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ï¼ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ ¹å¹¹å•é¡Œï¼‰

---

## ğŸ¯ å•é¡Œã®æ ¸å¿ƒ

### ğŸ’¡ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é‹­ã„æŒ‡æ‘˜
> ã€Œåˆ—åã®ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‚ã‘ã˜ã‚ƒãªã„ã§ã™ã‹ã€ã ã‘ã©ã€ãã‚Œã‚‰å…¨ã¦ã‚‚å«ã‚ã¦è‰²ã€…è¨ˆç®—ã¨ã‹ã‚°ãƒ©ãƒ•ã«å‡ºã—ãŸã‚Šã™ã‚‹ã‚ã‘ã§ã€ãã®**å…±é€šã®å°å¸³ã®ã‚ˆã†ãªã‚‚ã®**ã£ã¦ã©ã“ã§å®Ÿè£…ã™ã‚‹ã®ã‹ãªã£ã¦æ€ã£ã¦ã„ã¾ã™ã€‚ã€

### ğŸ” ç¾åœ¨ã®å•é¡Œåˆ†æ

```
âŒ ç¾åœ¨ã®å•é¡Œãƒ•ãƒ­ãƒ¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Infrastructure Layer                        â”‚
â”‚ â”œâ”€â”€ RakutenCsvParser.js                     â”‚
â”‚ â”‚   â”œâ”€â”€ JPå½¢å¼ â†’ ç‹¬è‡ªå¤‰æ›                   â”‚
â”‚ â”‚   â”œâ”€â”€ USå½¢å¼ â†’ ç‹¬è‡ªå¤‰æ›                   â”‚
â”‚ â”‚   â””â”€â”€ INVSTå½¢å¼ â†’ ç‹¬è‡ªå¤‰æ›                â”‚
â”‚ â””â”€â”€ [å„ã€…ãŒç•°ãªã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åãƒ»æ§‹é€ ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â¬‡ï¸ å•é¡Œï¼šçµ±ä¸€ã•ã‚Œã¦ã„ãªã„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Data Layer                                  â”‚
â”‚ â””â”€â”€ DataStoreManager.js                     â”‚
â”‚     â”œâ”€â”€ addStock() â† JP/USæ··åœ¨              â”‚
â”‚     â”œâ”€â”€ addMutualFund() â† INVSTæ··åœ¨         â”‚
â”‚     â””â”€â”€ [åŒã˜ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç•°è³ªãªãƒ‡ãƒ¼ã‚¿]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â¬‡ï¸ çµæœï¼šåˆ†æãƒ»è¨ˆç®—ãŒå›°é›£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Business Layer                              â”‚
â”‚ â””â”€â”€ SectorService.js                        â”‚
â”‚     â”œâ”€â”€ calculateConcentrationRisk()        â”‚
â”‚     â””â”€â”€ [ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã®ä¸çµ±ä¸€ã§è¨ˆç®—ã‚¨ãƒ©ãƒ¼] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ æ­£ã—ã„ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### ğŸ“‹ è¨­è¨ˆåŸå‰‡

1. **Domain Modelï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ï¼‰**: ãƒ“ã‚¸ãƒã‚¹æ¦‚å¿µã®çµ±ä¸€è¡¨ç¾
2. **Data Transformation**: å¤–éƒ¨å½¢å¼ â†’ å†…éƒ¨æ¨™æº–å½¢å¼
3. **Repository Pattern**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã®æŠ½è±¡åŒ–
4. **Single Source of Truth**: çµ±ä¸€ã•ã‚ŒãŸçœŸå®Ÿã®ãƒ‡ãƒ¼ã‚¿

### ğŸ¯ æ”¹å–„å¾Œã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
âœ… æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ•ãƒ­ãƒ¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”Œ Infrastructure Layer                     â”‚
â”‚ â”œâ”€â”€ RakutenCsvParser.js                     â”‚
â”‚ â”‚   â”œâ”€â”€ JP â†’ TransactionEntity               â”‚
â”‚ â”‚   â”œâ”€â”€ US â†’ TransactionEntity               â”‚
â”‚ â”‚   â””â”€â”€ INVST â†’ TransactionEntity            â”‚
â”‚ â””â”€â”€ [å…±é€šã®TransactionEntityã«çµ±ä¸€å¤‰æ›]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â¬‡ï¸ çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¼ Domain Layer (æ–°è¨­)                      â”‚
â”‚ â”œâ”€â”€ entities/                               â”‚
â”‚ â”‚   â”œâ”€â”€ TransactionEntity.js                â”‚
â”‚ â”‚   â”œâ”€â”€ AssetEntity.js                      â”‚
â”‚ â”‚   â””â”€â”€ PortfolioEntity.js                  â”‚
â”‚ â””â”€â”€ [ãƒ“ã‚¸ãƒã‚¹æ¦‚å¿µã®æ¨™æº–åŒ–å®šç¾©]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â¬‡ï¸ æ¨™æº–åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸª Data Layer                               â”‚
â”‚ â”œâ”€â”€ repositories/                           â”‚
â”‚ â”‚   â”œâ”€â”€ TransactionRepository.js            â”‚
â”‚ â”‚   â”œâ”€â”€ AssetRepository.js                  â”‚
â”‚ â”‚   â””â”€â”€ PortfolioRepository.js              â”‚
â”‚ â””â”€â”€ [çµ±ä¸€ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ã§ç®¡ç†]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â¬‡ï¸ çµ±ä¸€ãƒ‡ãƒ¼ã‚¿ã§åˆ†æ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¼ Business Layer                           â”‚
â”‚ â”œâ”€â”€ PortfolioAggregator.js                  â”‚
â”‚ â”œâ”€â”€ SectorService.js                        â”‚
â”‚ â””â”€â”€ [çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ç¢ºå®Ÿãªè¨ˆç®—]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Domain Modelè¨­è¨ˆ

### ğŸ¯ **TransactionEntity** - å–å¼•ã®çµ±ä¸€è¡¨ç¾

```javascript
/**
 * TransactionEntity - å…¨ã¦ã®å–å¼•ãƒ‡ãƒ¼ã‚¿ã®çµ±ä¸€è¡¨ç¾
 * ç›®çš„: JPæ ªãƒ»USæ ªãƒ»æŠ•è³‡ä¿¡è¨—ã‚’çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¡¨ç¾
 */
export class TransactionEntity {
    constructor(data) {
        // === åŸºæœ¬æƒ…å ±ï¼ˆå¿…é ˆï¼‰ ===
        this.id = data.id || this._generateId();
        this.transactionDate = data.transactionDate; // Dateå‹ã€çµ±ä¸€æ—¥ä»˜
        this.settlementDate = data.settlementDate;   // Dateå‹ã€å—æ¸¡æ—¥
        
        // === è³‡ç”£è­˜åˆ¥ï¼ˆå¿…é ˆï¼‰ ===
        this.assetName = data.assetName;            // stringã€çµ±ä¸€éŠ˜æŸ„å
        this.assetCode = data.assetCode || null;    // stringã€éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰/ãƒ†ã‚£ãƒƒã‚«ãƒ¼
        this.assetType = data.assetType;            // enum: 'stock'|'fund'|'etf'
        this.region = data.region;                  // enum: 'JP'|'US'|'OTHER'
        
        // === å–å¼•è©³ç´°ï¼ˆå¿…é ˆï¼‰ ===
        this.tradeType = data.tradeType;            // enum: 'buy'|'sell'|'dividend'
        this.quantity = data.quantity;              // numberã€æ•°é‡ï¼ˆæ ªæ•°ãƒ»å£æ•°ï¼‰
        this.unitPrice = data.unitPrice;            // numberã€å˜ä¾¡
        this.amount = data.amount;                  // numberã€ç´„å®šä»£é‡‘
        
        // === é‡‘é¡æƒ…å ±ï¼ˆå¿…é ˆãƒ»å††æ›ç®—ï¼‰ ===
        this.amountJpy = data.amountJpy;            // numberã€å††æ›ç®—é‡‘é¡
        this.unitPriceJpy = data.unitPriceJpy;      // numberã€å††æ›ç®—å˜ä¾¡
        this.currency = data.currency || 'JPY';    // stringã€å…ƒé€šè²¨
        this.exchangeRate = data.exchangeRate || 1; // numberã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ
        
        // === æ‰‹æ•°æ–™ãƒ»ç¨é‡‘ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ ===
        this.fee = data.fee || 0;                   // numberã€æ‰‹æ•°æ–™
        this.tax = data.tax || 0;                   // numberã€ç¨é‡‘
        this.otherCosts = data.otherCosts || 0;     // numberã€ãã®ä»–è²»ç”¨
        
        // === å£åº§æƒ…å ±ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ ===
        this.accountType = data.accountType || 'general'; // enum: 'general'|'nisa'|'isa'
        this.provider = data.provider || 'unknown';       // stringã€è¨¼åˆ¸ä¼šç¤¾
        
        // === ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚·ã‚¹ãƒ†ãƒ ï¼‰ ===
        this.source = data.source || 'manual';     // stringã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹
        this.sourceFormat = data.sourceFormat;     // stringã€å…ƒCSVå½¢å¼
        this.createdAt = data.createdAt || new Date();
        this.updatedAt = data.updatedAt || new Date();
        
        // === æ‹¡å¼µãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå°†æ¥ç”¨ï¼‰ ===
        this.metadata = data.metadata || {};       // objectã€è¿½åŠ æƒ…å ±
    }

    /**
     * ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
     */
    validate() {
        const errors = [];
        
        if (!this.transactionDate) errors.push('å–å¼•æ—¥ã¯å¿…é ˆã§ã™');
        if (!this.assetName) errors.push('éŠ˜æŸ„åã¯å¿…é ˆã§ã™');
        if (!this.assetType) errors.push('è³‡ç”£ç¨®åˆ¥ã¯å¿…é ˆã§ã™');
        if (!this.tradeType) errors.push('å£²è²·åŒºåˆ†ã¯å¿…é ˆã§ã™');
        if (this.quantity <= 0) errors.push('æ•°é‡ã¯æ­£ã®å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
        if (this.amount <= 0) errors.push('é‡‘é¡ã¯æ­£ã®å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™');
        
        return {
            isValid: errors.length === 0,
            errors
        };
    }

    /**
     * å††æ›ç®—é‡‘é¡ã‚’è‡ªå‹•è¨ˆç®—
     */
    calculateJpyAmounts() {
        if (this.currency === 'JPY') {
            this.amountJpy = this.amount;
            this.unitPriceJpy = this.unitPrice;
        } else {
            this.amountJpy = this.amount * this.exchangeRate;
            this.unitPriceJpy = this.unitPrice * this.exchangeRate;
        }
    }

    /**
     * ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªé›†ç´„ç”¨ã®æ¨™æº–åŒ–ãƒ‡ãƒ¼ã‚¿å–å¾—
     */
    toAggregationFormat() {
        return {
            id: this.id,
            date: this.transactionDate,
            assetName: this.assetName,
            assetCode: this.assetCode,
            assetType: this.assetType,
            region: this.region,
            tradeType: this.tradeType,
            quantity: this.quantity,
            amountJpy: this.amountJpy,
            unitPriceJpy: this.unitPriceJpy,
            accountType: this.accountType,
            provider: this.provider
        };
    }
}
```

### ğŸ¯ **AssetEntity** - è³‡ç”£ã®çµ±ä¸€è¡¨ç¾

```javascript
/**
 * AssetEntity - é›†ç´„ã•ã‚ŒãŸè³‡ç”£ãƒ‡ãƒ¼ã‚¿ã®çµ±ä¸€è¡¨ç¾
 * ç›®çš„: å–å¼•å±¥æ­´ã‹ã‚‰é›†ç´„ã•ã‚ŒãŸç¾åœ¨ã®ä¿æœ‰è³‡ç”£çŠ¶æ³
 */
export class AssetEntity {
    constructor(data) {
        // === è³‡ç”£è­˜åˆ¥ ===
        this.id = data.id || this._generateId();
        this.assetName = data.assetName;
        this.assetCode = data.assetCode;
        this.assetType = data.assetType;
        this.region = data.region;
        
        // === ä¿æœ‰çŠ¶æ³ ===
        this.currentQuantity = data.currentQuantity || 0;
        this.currentValueJpy = data.currentValueJpy || 0;
        this.acquisitionCostJpy = data.acquisitionCostJpy || 0;
        this.gainLossJpy = data.gainLossJpy || 0;
        this.gainLossPercent = data.gainLossPercent || 0;
        
        // === ã‚»ã‚¯ã‚¿ãƒ¼æƒ…å ±ï¼ˆSectorServiceã‹ã‚‰ä»˜ä¸ï¼‰ ===
        this.sector = data.sector || null;
        this.subSector = data.subSector || null;
        this.sectorSource = data.sectorSource || null;
        
        // === å£åº§ãƒ»ãƒ¡ã‚¿æƒ…å ± ===
        this.accountType = data.accountType;
        this.provider = data.provider;
        this.firstPurchaseDate = data.firstPurchaseDate;
        this.lastUpdateDate = data.lastUpdateDate;
        
        // === å–å¼•å±¥æ­´ã‚µãƒãƒªãƒ¼ ===
        this.totalTransactions = data.totalTransactions || 0;
        this.totalBuyQuantity = data.totalBuyQuantity || 0;
        this.totalSellQuantity = data.totalSellQuantity || 0;
        this.averageUnitPrice = data.averageUnitPrice || 0;
    }
}
```

---

## ğŸ”§ Infrastructure Layeræ”¹ä¿®

### ğŸ¯ **RakutenCsvParser v3.0** - çµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›

```javascript
/**
 * RakutenCsvParser v3.0 - TransactionEntityã¸ã®çµ±ä¸€å¤‰æ›
 */
export class RakutenCsvParser {
    
    /**
     * CSVãƒ‡ãƒ¼ã‚¿ã‚’TransactionEntityã«å¤‰æ›
     */
    async parseCsvFile(file, csvType, progressCallback) {
        // ... æ—¢å­˜ã®èª­ã¿è¾¼ã¿å‡¦ç†
        
        // ğŸ†• çµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¸ã®å¤‰æ›
        const transactions = rawData.map(row => 
            this.convertToTransactionEntity(row, csvType)
        );
        
        return {
            success: true,
            entities: transactions,  // ğŸ†• çµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é…åˆ—
            metadata: {
                totalCount: transactions.length,
                validCount: transactions.filter(t => t.validate().isValid).length,
                sourceFormat: csvType,
                parseDate: new Date().toISOString()
            }
        };
    }

    /**
     * å„CSVå½¢å¼ã‚’TransactionEntityã«å¤‰æ›
     */
    convertToTransactionEntity(row, csvType) {
        switch (csvType) {
            case 'JP':
                return this.convertJpStockToEntity(row);
            case 'US':
                return this.convertUsStockToEntity(row);
            case 'INVST':
                return this.convertInvestmentTrustToEntity(row);
            default:
                throw new Error(`æœªå¯¾å¿œã®CSVå½¢å¼: ${csvType}`);
        }
    }

    /**
     * JPæ ªå¼ â†’ TransactionEntityå¤‰æ›
     */
    convertJpStockToEntity(row) {
        return new TransactionEntity({
            transactionDate: this.parseDate(row['ç´„å®šæ—¥']),
            settlementDate: this.parseDate(row['å—æ¸¡æ—¥']),
            assetName: row['éŠ˜æŸ„å'],
            assetCode: row['éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰'],
            assetType: 'stock',
            region: 'JP',
            tradeType: this.normalizeTradeType(row['å£²è²·åŒºåˆ†']),
            quantity: this.parseNumber(row['æ•°é‡ï¼»æ ªï¼½']),
            unitPrice: this.parseNumber(row['å˜ä¾¡ï¼»å††ï¼½']),
            amount: this.parseNumber(row['å—æ¸¡é‡‘é¡ï¼»å††ï¼½']),
            amountJpy: this.parseNumber(row['å—æ¸¡é‡‘é¡ï¼»å††ï¼½']),
            unitPriceJpy: this.parseNumber(row['å˜ä¾¡ï¼»å††ï¼½']),
            currency: 'JPY',
            exchangeRate: 1,
            fee: this.parseNumber(row['æ‰‹æ•°æ–™ï¼»å††ï¼½']),
            tax: this.parseNumber(row['ç¨é‡‘ç­‰ï¼»å††ï¼½']),
            accountType: this.normalizeAccountType(row['å£åº§åŒºåˆ†']),
            provider: 'æ¥½å¤©è¨¼åˆ¸',
            source: 'rakuten_csv',
            sourceFormat: 'JP'
        });
    }

    /**
     * USæ ªå¼ â†’ TransactionEntityå¤‰æ›
     */
    convertUsStockToEntity(row) {
        return new TransactionEntity({
            transactionDate: this.parseDate(row['ç´„å®šæ—¥']),
            settlementDate: this.parseDate(row['å—æ¸¡æ—¥']),
            assetName: row['éŠ˜æŸ„å'],
            assetCode: row['ãƒ†ã‚£ãƒƒã‚«ãƒ¼'],
            assetType: 'stock',
            region: 'US',
            tradeType: this.normalizeTradeType(row['å£²è²·åŒºåˆ†']),
            quantity: this.parseNumber(row['æ•°é‡ï¼»æ ªï¼½']),
            unitPrice: this.parseNumber(row['å˜ä¾¡ï¼»USãƒ‰ãƒ«ï¼½']),
            amount: this.parseNumber(row['å—æ¸¡é‡‘é¡ï¼»USãƒ‰ãƒ«ï¼½']),
            amountJpy: this.parseNumber(row['å—æ¸¡é‡‘é¡ï¼»å††ï¼½']),
            unitPriceJpy: this.calculateJpyUnitPrice(row),
            currency: 'USD',
            exchangeRate: this.parseNumber(row['ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ']),
            fee: this.parseNumber(row['æ‰‹æ•°æ–™ï¼»USãƒ‰ãƒ«ï¼½']),
            tax: this.parseNumber(row['ç¨é‡‘ï¼»USãƒ‰ãƒ«ï¼½']),
            accountType: this.normalizeAccountType(row['å£åº§']),
            provider: 'æ¥½å¤©è¨¼åˆ¸',
            source: 'rakuten_csv',
            sourceFormat: 'US'
        });
    }

    /**
     * æŠ•è³‡ä¿¡è¨— â†’ TransactionEntityå¤‰æ›
     */
    convertInvestmentTrustToEntity(row) {
        const complexAmount = this.parseComplexAmount(row['å—æ¸¡é‡‘é¡/(ãƒã‚¤ãƒ³ãƒˆåˆ©ç”¨)[å††]']);
        
        return new TransactionEntity({
            transactionDate: this.parseDate(row['ç´„å®šæ—¥']),
            settlementDate: this.parseDate(row['å—æ¸¡æ—¥']),
            assetName: row['ãƒ•ã‚¡ãƒ³ãƒ‰å'],
            assetCode: null, // æŠ•è³‡ä¿¡è¨—ã«ã¯ã‚³ãƒ¼ãƒ‰ãªã—
            assetType: 'fund',
            region: this.inferRegionFromFundName(row['ãƒ•ã‚¡ãƒ³ãƒ‰å']),
            tradeType: this.normalizeTradeType(row['å–å¼•']),
            quantity: this.parseNumber(row['æ•°é‡ï¼»å£ï¼½']),
            unitPrice: this.parseNumber(row['å˜ä¾¡']),
            amount: complexAmount.amount,
            amountJpy: complexAmount.amount,
            unitPriceJpy: this.parseNumber(row['å˜ä¾¡']),
            currency: 'JPY',
            exchangeRate: 1,
            accountType: this.normalizeAccountType(row['å£åº§']),
            provider: 'æ¥½å¤©è¨¼åˆ¸',
            source: 'rakuten_csv',
            sourceFormat: 'INVST',
            metadata: {
                pointUsed: complexAmount.pointUsed, // ãƒã‚¤ãƒ³ãƒˆåˆ©ç”¨é¡
                purchaseMethod: row['è²·ä»˜æ–¹æ³•']
            }
        });
    }
}
```

---

## ğŸª Data Layeræ”¹ä¿®

### ğŸ¯ **Repository Patternå®Ÿè£…**

```javascript
/**
 * TransactionRepository - å–å¼•ãƒ‡ãƒ¼ã‚¿ã®çµ±ä¸€ç®¡ç†
 */
export class TransactionRepository {
    constructor(dataStoreManager) {
        this.dataStore = dataStoreManager;
        this.STORAGE_KEY = 'unified_transactions';
    }

    /**
     * å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ï¼ˆçµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
     */
    async saveTransactions(transactionEntities) {
        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        const validTransactions = [];
        const errors = [];

        for (const transaction of transactionEntities) {
            const validation = transaction.validate();
            if (validation.isValid) {
                validTransactions.push(transaction);
            } else {
                errors.push({ transaction: transaction.id, errors: validation.errors });
            }
        }

        // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨çµ±åˆ
        const existingTransactions = await this.getAllTransactions();
        const allTransactions = [...existingTransactions, ...validTransactions];

        // é‡è¤‡é™¤å»ï¼ˆåŒã˜IDã®å–å¼•ã¯ä¸Šæ›¸ãï¼‰
        const uniqueTransactions = this.removeDuplicates(allTransactions);

        // ä¿å­˜
        const success = this.dataStore.save(this.STORAGE_KEY, uniqueTransactions);

        return {
            success,
            savedCount: validTransactions.length,
            errorCount: errors.length,
            errors,
            totalTransactions: uniqueTransactions.length
        };
    }

    /**
     * å…¨å–å¼•ãƒ‡ãƒ¼ã‚¿å–å¾—
     */
    async getAllTransactions() {
        const data = this.dataStore.load(this.STORAGE_KEY) || [];
        return data.map(item => new TransactionEntity(item));
    }

    /**
     * æ¡ä»¶ã«ã‚ˆã‚‹å–å¼•ãƒ‡ãƒ¼ã‚¿æ¤œç´¢
     */
    async findTransactions(criteria) {
        const allTransactions = await this.getAllTransactions();
        
        return allTransactions.filter(transaction => {
            if (criteria.assetType && transaction.assetType !== criteria.assetType) return false;
            if (criteria.region && transaction.region !== criteria.region) return false;
            if (criteria.provider && transaction.provider !== criteria.provider) return false;
            if (criteria.accountType && transaction.accountType !== criteria.accountType) return false;
            if (criteria.dateFrom && transaction.transactionDate < criteria.dateFrom) return false;
            if (criteria.dateTo && transaction.transactionDate > criteria.dateTo) return false;
            return true;
        });
    }

    /**
     * è³‡ç”£åˆ¥å–å¼•å±¥æ­´å–å¾—
     */
    async getTransactionsByAsset(assetCode) {
        const criteria = { assetCode };
        return await this.findTransactions(criteria);
    }
}

/**
 * AssetRepository - é›†ç´„è³‡ç”£ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†
 */
export class AssetRepository {
    constructor(dataStoreManager, transactionRepository) {
        this.dataStore = dataStoreManager;
        this.transactionRepo = transactionRepository;
        this.STORAGE_KEY = 'aggregated_assets';
    }

    /**
     * å–å¼•å±¥æ­´ã‹ã‚‰è³‡ç”£ã‚’é›†ç´„
     */
    async aggregateAssetsFromTransactions() {
        const transactions = await this.transactionRepo.getAllTransactions();
        const assetMap = new Map();

        // è³‡ç”£åˆ¥ã«å–å¼•ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
        for (const transaction of transactions) {
            const key = `${transaction.assetCode || transaction.assetName}_${transaction.region}`;
            
            if (!assetMap.has(key)) {
                assetMap.set(key, {
                    assetName: transaction.assetName,
                    assetCode: transaction.assetCode,
                    assetType: transaction.assetType,
                    region: transaction.region,
                    transactions: []
                });
            }
            
            assetMap.get(key).transactions.push(transaction);
        }

        // å„è³‡ç”£ã®é›†ç´„è¨ˆç®—
        const aggregatedAssets = [];
        for (const [key, assetData] of assetMap) {
            const asset = this.calculateAssetSummary(assetData);
            aggregatedAssets.push(asset);
        }

        // ä¿å­˜
        await this.saveAggregatedAssets(aggregatedAssets);
        return aggregatedAssets;
    }

    /**
     * è³‡ç”£ã‚µãƒãƒªãƒ¼è¨ˆç®—
     */
    calculateAssetSummary(assetData) {
        const transactions = assetData.transactions;
        let currentQuantity = 0;
        let totalAcquisitionCost = 0;
        let totalBuyQuantity = 0;
        let totalSellQuantity = 0;

        // å–å¼•ã‚’æ™‚ç³»åˆ—ã§ã‚½ãƒ¼ãƒˆ
        transactions.sort((a, b) => a.transactionDate - b.transactionDate);

        for (const tx of transactions) {
            if (tx.tradeType === 'buy') {
                currentQuantity += tx.quantity;
                totalAcquisitionCost += tx.amountJpy;
                totalBuyQuantity += tx.quantity;
            } else if (tx.tradeType === 'sell') {
                currentQuantity -= tx.quantity;
                totalSellQuantity += tx.quantity;
                // FIFOæ³•ã§å–å¾—åŸä¾¡ã‚’æ¸›é¡ï¼ˆç°¡ç•¥åŒ–ï¼‰
                const sellRatio = tx.quantity / (currentQuantity + tx.quantity);
                totalAcquisitionCost *= (1 - sellRatio);
            }
        }

        const averageUnitPrice = totalBuyQuantity > 0 ? totalAcquisitionCost / totalBuyQuantity : 0;
        
        return new AssetEntity({
            assetName: assetData.assetName,
            assetCode: assetData.assetCode,
            assetType: assetData.assetType,
            region: assetData.region,
            currentQuantity,
            acquisitionCostJpy: totalAcquisitionCost,
            totalTransactions: transactions.length,
            totalBuyQuantity,
            totalSellQuantity,
            averageUnitPrice,
            firstPurchaseDate: transactions[0]?.transactionDate,
            lastUpdateDate: transactions[transactions.length - 1]?.transactionDate
        });
    }
}
```

---

## ğŸ’¼ Business Layerçµ±åˆ

### ğŸ¯ **PortfolioAggregator v3.0** - çµ±ä¸€ãƒ‡ãƒ¼ã‚¿æ´»ç”¨

```javascript
/**
 * PortfolioAggregator v3.0 - çµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ™ãƒ¼ã‚¹ã®é›†ç´„
 */
export class PortfolioAggregator {
    constructor(transactionRepository, assetRepository, sectorService) {
        this.transactionRepo = transactionRepository;
        this.assetRepo = assetRepository;
        this.sectorService = sectorService;
    }

    /**
     * åŒ…æ‹¬çš„ãªãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ†æ
     */
    async generatePortfolioAnalysis() {
        // 1. æœ€æ–°ã®è³‡ç”£é›†ç´„
        const assets = await this.assetRepo.aggregateAssetsFromTransactions();
        
        // 2. ã‚»ã‚¯ã‚¿ãƒ¼æƒ…å ±ä»˜ä¸
        const assetsWithSectors = assets.map(asset => 
            this.sectorService.assignSector(asset)
        );
        
        // 3. åœ°åŸŸåˆ¥åˆ†æ
        const regionAnalysis = this.analyzeByRegion(assetsWithSectors);
        
        // 4. ã‚»ã‚¯ã‚¿ãƒ¼åˆ†æ
        const sectorAnalysis = this.sectorService.generateSectorAnalysis(assetsWithSectors);
        
        // 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
        const performanceAnalysis = await this.analyzePerformance(assets);
        
        return {
            summary: {
                totalAssets: assets.length,
                totalValueJpy: assetsWithSectors.reduce((sum, a) => sum + a.currentValueJpy, 0),
                totalGainLossJpy: assetsWithSectors.reduce((sum, a) => sum + a.gainLossJpy, 0)
            },
            regional: regionAnalysis,
            sectoral: sectorAnalysis,
            performance: performanceAnalysis,
            assets: assetsWithSectors,
            generatedAt: new Date().toISOString()
        };
    }

    /**
     * åœ°åŸŸåˆ¥åˆ†æ
     */
    analyzeByRegion(assets) {
        const regionMap = new Map();
        
        for (const asset of assets) {
            if (!regionMap.has(asset.region)) {
                regionMap.set(asset.region, {
                    region: asset.region,
                    assetCount: 0,
                    totalValue: 0,
                    totalGainLoss: 0,
                    assets: []
                });
            }
            
            const regionData = regionMap.get(asset.region);
            regionData.assetCount++;
            regionData.totalValue += asset.currentValueJpy;
            regionData.totalGainLoss += asset.gainLossJpy;
            regionData.assets.push(asset);
        }
        
        return Array.from(regionMap.values());
    }
}
```

---

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å…¨ä½“åƒ

### âœ… **æ”¹å–„å¾Œã®å®Œå…¨ãªãƒ•ãƒ­ãƒ¼**

```
ğŸ“ æ¥½å¤©è¨¼åˆ¸CSV (3å½¢å¼)
    â¬‡ï¸
ğŸ”Œ RakutenCsvParser v3.0
    â”œâ”€â”€ convertJpStockToEntity()
    â”œâ”€â”€ convertUsStockToEntity()
    â””â”€â”€ convertInvestmentTrustToEntity()
    â¬‡ï¸ [TransactionEntityçµ±ä¸€å½¢å¼]
ğŸª TransactionRepository
    â””â”€â”€ saveTransactions(entities[])
    â¬‡ï¸ [çµ±ä¸€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹]
ğŸª AssetRepository
    â””â”€â”€ aggregateAssetsFromTransactions()
    â¬‡ï¸ [AssetEntityé›†ç´„æ¸ˆã¿]
ğŸ’¼ SectorService
    â””â”€â”€ assignSector(asset) â†’ sectorä»˜ä¸
    â¬‡ï¸ [å®Œå…¨ãªåˆ†æç”¨ãƒ‡ãƒ¼ã‚¿]
ğŸ’¼ PortfolioAggregator
    â”œâ”€â”€ generatePortfolioAnalysis()
    â”œâ”€â”€ analyzeByRegion()
    â””â”€â”€ calculatePerformance()
    â¬‡ï¸ [çµ±åˆåˆ†æçµæœ]
ğŸ–¼ï¸ UI Layer
    â”œâ”€â”€ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
    â”œâ”€â”€ ã‚»ã‚¯ã‚¿ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
    â””â”€â”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚°ãƒ©ãƒ•
```

---

## ğŸ“‹ å®Ÿè£…å„ªå…ˆåº¦

### ğŸ”´ **Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆé«˜å„ªå…ˆåº¦ï¼‰**
1. **TransactionEntityè¨­è¨ˆãƒ»å®Ÿè£…**
2. **RakutenCsvParser v3.0æ”¹ä¿®**ï¼ˆçµ±ä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å¯¾å¿œï¼‰
3. **TransactionRepositoryåŸºæœ¬å®Ÿè£…**
4. **æ—¢å­˜DataStoreManagerã¨ã®çµ±åˆ**

### ğŸŸ¡ **Phase 2: é›†ç´„æ©Ÿèƒ½ï¼ˆä¸­å„ªå…ˆåº¦ï¼‰**
1. **AssetRepositoryå®Ÿè£…**
2. **è³‡ç”£é›†ç´„ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…**
3. **SectorServiceçµ±åˆãƒ†ã‚¹ãƒˆ**
4. **ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½**

### ğŸŸ¢ **Phase 3: åˆ†æå¼·åŒ–ï¼ˆä½å„ªå…ˆåº¦ï¼‰**
1. **PortfolioAggregatoré«˜åº¦åˆ†æ**
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³**
3. **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ©Ÿèƒ½**
4. **UIå±¤ã§ã®ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–**

---

## ğŸ¯ ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æœ€é©åŒ–

### ğŸ“ **æ–°ã—ã„ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆ**

```
æŠ•è³‡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ v3 - æ”¹å–„ç‰ˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¼ï¸  Presentation Layer             â”‚  â† UIãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§   Application Layer              â”‚  â† ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ç·¨æˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¼  Business Layer                 â”‚  â† ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»åˆ†æ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ—ï¸  Domain Layer â­ NEW            â”‚  â† ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ»ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸª  Data Layer                     â”‚  â† Repositoryãƒ»ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”Œ  Infrastructure Layer           â”‚  â† å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ **å„å±¤ã®è²¬å‹™æ˜ç¢ºåŒ–**

| å±¤ | è²¬å‹™ | å®Ÿè£…ä¾‹ |
|----|----|-------|
| **Domain Layer** | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å®šç¾©ãƒ»ãƒ“ã‚¸ãƒã‚¹æ¦‚å¿µçµ±ä¸€ | TransactionEntity, AssetEntity |
| **Data Layer** | ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹æŠ½è±¡åŒ–ãƒ»æ°¸ç¶šåŒ– | TransactionRepository, AssetRepository |
| **Business Layer** | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»åˆ†æ | PortfolioAggregator, SectorService |
| **Infrastructure** | å¤–éƒ¨å½¢å¼å¤‰æ›ãƒ»æŠ€è¡“çš„å‡¦ç† | RakutenCsvParser, ExternalAPI |

---

## ğŸ’¡ **çµè«–**

ã“ã®è¨­è¨ˆæ”¹å–„ã«ã‚ˆã‚Šï¼š

1. **ãƒ‡ãƒ¼ã‚¿çµ±ä¸€**: å…¨ã¦ã®å–å¼•ãŒåŒä¸€å½¢å¼ã§ç®¡ç†ã•ã‚Œã‚‹
2. **åˆ†æç²¾åº¦**: çµ±ä¸€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚ˆã‚‹ç¢ºå®Ÿãªè¨ˆç®—
3. **æ‹¡å¼µæ€§**: æ–°ã—ã„CSVå½¢å¼ãƒ»è¨¼åˆ¸ä¼šç¤¾ã¸ã®å¯¾å¿œãŒå®¹æ˜“
4. **ä¿å®ˆæ€§**: ãƒ¬ã‚¤ãƒ¤ãƒ¼è²¬å‹™ã®æ˜ç¢ºåŒ–
5. **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: å„å±¤ã®ç‹¬ç«‹ãƒ†ã‚¹ãƒˆãŒå¯èƒ½

**å…±é€šã®å°å¸³**ã¯ **Domain Layer ã® TransactionEntity/AssetEntity** ã¨ã—ã¦å®Ÿç¾ã•ã‚Œã€ã™ã¹ã¦ã®åˆ†æãƒ»è¨ˆç®—æ©Ÿèƒ½ã®åŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚

**è¨­è¨ˆæ”¹å–„æ›¸ä½œæˆè€…**: Claude Code  
**æ‰¿èª**: æŠ•è³‡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ v2 é–‹ç™ºãƒãƒ¼ãƒ   
**å®Ÿè£…é–‹å§‹**: 2025å¹´9æœˆ21æ—¥