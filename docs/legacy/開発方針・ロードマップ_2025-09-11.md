# 投資ダッシュボード v2 - 開発方針・ロードマップ

**作成日**: 2025年9月11日  
**対象期間**: 2025年9月～2025年12月  
**ドキュメント種別**: 開発戦略・実装計画

## 🎯 開発方針の基本理念

### 1. 段階的実装アプローチ（継続）
- **「動作する最小限の機能」を優先**
- **各フェーズで動作確認を徹底**
- **後戻りのない堅実な進行**

### 2. ユーザビリティファースト
- **実際の投資家のワークフローに合わせた設計**
- **直感的で使いやすいUI/UX**
- **エラー処理とフィードバックの充実**

### 3. 保守性・拡張性重視
- **コードの可読性と保守性確保**
- **将来の機能追加を見据えた設計**
- **ドキュメントとテストの充実**

## 📅 開発ロードマップ

### Phase 4: 実用性向上フェーズ 🚀
**期間**: 2025年9月中旬～10月中旬（1ヶ月）  
**目標**: 日常的に使える投資管理ツールへ

#### 4.1 フォーム機能実装（Week 1-2）
**優先度**: 🔴 最高

##### 投資信託追加フォーム
- **モーダルダイアログ設計・実装**
  - フィールド: 名前、投資額、購入数量、取得日
  - リアルタイムバリデーション
  - 入力補完機能（過去入力履歴）

- **バリデーション強化**
  - 必須項目チェック
  - 数値形式チェック
  - 重複チェック（同名銘柄）

- **ユーザビリティ改善**
  - 入力エラー時の分かりやすいメッセージ
  - 成功時のフィードバック
  - キーボードショートカット対応

```javascript
// 実装予定の構造例
class AssetFormController {
    async handleSubmit(formData) {
        // バリデーション → 保存 → UI更新
    }
}
```

#### 4.2 データ操作機能実装（Week 2-3）
**優先度**: 🔴 最高

##### 編集・削除機能
- **インライン編集機能**
  - 資産一覧での直接編集
  - 保存・キャンセル操作

- **削除機能**
  - 削除確認ダイアログ
  - 復元機能（30日間）
  - 関連データの整合性保証

- **バッチ操作**
  - 複数選択による一括操作
  - 一括削除・一括編集

#### 4.3 データインポート機能（Week 3-4）
**優先度**: 🟡 高

##### CSVインポート完成
- **楽天証券フォーマット対応**
  - CSV解析とデータ変換
  - 重複データのマージ戦略
  - インポートエラーハンドリング

- **プレビュー機能**
  - インポート前のデータ確認
  - 問題があるデータのハイライト
  - 選択的インポート機能

### Phase 5: UX/品質向上フェーズ 🎨
**期間**: 2025年10月中旬～11月中旬（1ヶ月）  
**目標**: プロフェッショナルレベルのユーザー体験

#### 5.1 UI/UX大幅改善（Week 1-2）
**優先度**: 🟡 高

##### モバイル対応強化
- **レスポンシブデザイン改善**
  - タブレット対応
  - スマートフォン対応
  - タッチジェスチャー対応

- **パフォーマンス最適化**
  - チャート描画の最適化
  - データ読み込みの高速化
  - UI アニメーションの軽量化

##### アクセシビリティ向上
- **WAI-ARIA対応**
- **キーボードナビゲーション**
- **カラーコントラスト改善**

#### 5.2 高度な分析機能（Week 2-3）
**優先度**: 🟢 中

##### ダッシュボード機能拡張
- **高度なチャート機能**
  - 複数期間比較
  - セクター別パフォーマンス
  - リスク・リターン散布図

- **レポート機能**
  - PDF出力
  - Excel出力
  - 定期レポート生成

#### 5.3 データ管理機能強化（Week 3-4）
**優先度**: 🟡 高

##### バックアップ・復元機能
- **データエクスポート**
  - JSON形式での完全バックアップ
  - CSV形式での部分エクスポート

- **データインポート拡張**
  - SBI証券フォーマット対応
  - マネーフォワード連携検討

### Phase 6: 技術基盤強化フェーズ ⚙️
**期間**: 2025年11月中旬～12月中旬（1ヶ月）  
**目標**: 保守性・拡張性・品質の向上

#### 6.1 TypeScript化（Week 1-2）
**優先度**: 🟢 中

##### 段階的TypeScript導入
- **型定義ファイル作成**
  - Asset.d.ts
  - Repository.d.ts
  - View.d.ts

- **既存コードの変換**
  - Business Layer → Data Layer → UI Layer順
  - JSDocからTypeScriptアノテーションへ

#### 6.2 テスト導入（Week 2-3）
**優先度**: 🟡 高

##### テスト環境構築
- **ユニットテスト**: Jest + Testing Library
- **統合テスト**: LocalStorage mocking
- **E2Eテスト**: Playwright検討

##### テストケース作成
- **Critical Path Testing**
  - 資産追加・編集・削除
  - データ計算の正確性
  - LocalStorage連携

#### 6.3 ビルドシステム導入（Week 3-4）
**優先度**: 🟢 中

##### 開発環境整備
- **Vite導入**: 高速開発サーバー
- **ESLint + Prettier**: コード品質管理
- **Husky**: Git Hooks設定

## 🛠 技術戦略

### 1. 現在の技術スタック継続・強化
```
フロントエンド:
├── JavaScript (ES6+) → TypeScript移行予定
├── HTML5 (継続)
├── CSS3 → CSS-in-JS検討
├── Chart.js (継続・機能拡張)
└── Lucide Icons (継続)

データ管理:
├── LocalStorage (継続)
├── JSON (継続)
└── IndexedDB (将来検討)

開発ツール:
├── Claude Code (継続)
├── Vite (導入予定)
├── Jest (導入予定)
└── TypeScript (導入予定)
```

### 2. アーキテクチャ進化計画
```
現在: レイヤード・アーキテクチャ
│
├── 短期: Clean Architecture要素追加
│   ├── Use Case層追加
│   ├── Entity層強化
│   └── Dependency Injection拡張
│
└── 長期: モジュラーモノリス
    ├── Feature-based組織化
    ├── 独立したモジュール境界
    └── Plugin architecture
```

### 3. データ戦略
```
現在: LocalStorage
│
├── 短期改善:
│   ├── データバージョニング
│   ├── マイグレーション機能
│   └── 圧縮・最適化
│
└── 将来検討:
    ├── IndexedDB移行
    ├── クラウド同期
    └── オフライン対応強化
```

## 📊 品質管理戦略

### 1. コード品質指標と目標
| 指標 | 現在 | 短期目標 | 長期目標 |
|------|------|----------|----------|
| JSDoc覆蓋率 | 50% | 100% | - |
| TypeScript化 | 0% | 50% | 100% |
| テストカバレッジ | 0% | 70% | 90% |
| ESLintエラー | 未測定 | 0 | 0 |

### 2. レビュー・テストプロセス
```
開発フロー:
コード作成 → 自動テスト → ESLint → 動作確認 → リリース
    ↓              ↓         ↓         ↓
Claude Code    Jest      自動fix    手動QA
```

### 3. ドキュメント戦略
- **API文書**: TypeScript化と同時に自動生成
- **ユーザーガイド**: 機能完成後に作成
- **開発者ガイド**: アーキテクチャ確定後に詳細化

## 🚀 実装優先順位マトリクス

### 高優先度（Must Have）🔴
1. **投資信託追加フォーム** - 基本機能として必須
2. **編集・削除機能** - 実用性に直結
3. **CSVインポート完成** - ユーザビリティ向上
4. **モバイル対応** - 現代的なWebアプリとして必須

### 中優先度（Should Have）🟡
5. **テスト導入** - 品質保証
6. **高度なチャート機能** - 差別化要因
7. **TypeScript化** - 保守性向上
8. **レポート機能** - 付加価値

### 低優先度（Could Have）🟢
9. **ビルドシステム** - 開発効率化
10. **アクセシビリティ** - ユーザビリティ
11. **クラウド同期** - 将来機能
12. **Plugin architecture** - 拡張性

## 🎯 成功指標（KPI）

### 1. 機能面
- [ ] 投資信託10件以上の管理が快適
- [ ] モバイルデバイスでの操作が快適
- [ ] CSVインポートが5分以内で完了
- [ ] エラー発生時の復旧が容易

### 2. 技術面
- [ ] ページロード時間3秒以内
- [ ] JavaScriptエラー月間0件
- [ ] テストカバレッジ70%以上
- [ ] TypeScript化50%以上

### 3. 保守性
- [ ] 新機能追加が1週間以内
- [ ] バグ修正が1日以内
- [ ] コードレビューが1時間以内
- [ ] ドキュメント更新が同時

## 🔮 将来ビジョン（2026年以降）

### 1. 機能拡張可能性
- **API連携**: 証券会社API統合
- **AI機能**: ポートフォリオ最適化提案
- **SNS機能**: 投資情報共有
- **通知機能**: 相場アラート

### 2. 技術進化可能性
- **PWA化**: ネイティブアプリ体験
- **WebAssembly**: 高速計算処理
- **GraphQL**: 効率的データ取得
- **Micro Frontends**: 大規模化対応

### 3. ビジネス展開可能性
- **SaaS化**: クラウドサービス提供
- **白ラベル**: 他社向けソリューション
- **API提供**: 開発者向けプラットフォーム

## 📋 アクションプラン（直近1ヶ月）

### Week 1（9月第3週）
- [ ] 投資信託追加フォーム設計
- [ ] モーダルダイアログ実装
- [ ] バリデーション機能実装

### Week 2（9月第4週）
- [ ] フォーム完成・テスト
- [ ] 編集機能実装開始
- [ ] UI/UX改善

### Week 3（10月第1週）
- [ ] 編集・削除機能完成
- [ ] CSVインポート実装
- [ ] モバイル対応開始

### Week 4（10月第2週）
- [ ] 全機能統合テスト
- [ ] パフォーマンス最適化
- [ ] ドキュメント更新

## 💡 開発時の注意点・ベストプラクティス

### 1. コーディング指針
- **関数型プログラミング**要素の活用
- **純粋関数**の意識的な実装
- **副作用の最小化**
- **イミュータブルデータ**の活用

### 2. エラーハンドリング戦略
- **例外の早期キャッチ**
- **ユーザーフレンドリーなエラーメッセージ**
- **ログ記録の充実**
- **復旧手順の提供**

### 3. パフォーマンス意識
- **初期表示速度の最適化**
- **メモリ使用量の監視**
- **DOM操作の最小化**
- **非同期処理の活用**

## 🎉 まとめ

### 開発方針の核心
1. **段階的確実な進歩**: 各フェーズで確実に動作する機能を積み上げ
2. **ユーザー中心設計**: 実際の投資家のニーズに応える実用的な機能
3. **技術的卓越性**: 保守性・拡張性・品質を重視した実装

### 成功への道筋
- **Phase 4**: 実用的な投資管理ツールとして完成
- **Phase 5**: 優れたUXを持つ差別化されたプロダクト
- **Phase 6**: 技術的に優れた保守性の高いコードベース

### 期待される成果
**2025年12月時点での到達目標**:
- 日常的に使える投資ダッシュボード
- プロフェッショナルレベルのUI/UX
- 拡張・保守が容易な技術基盤
- 将来的な事業化可能性

このロードマップに従って開発を進めることで、**個人投資家にとって真に価値のある投資管理ツール**を実現し、同時に**技術的にも優れたWebアプリケーション**として完成させることができます。